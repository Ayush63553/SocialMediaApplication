<div class="container d-flex justify-content-center align-items-center vh-100">
  <div class="card shadow-lg p-4 w-50">

    <h3 class="text-center mb-4 text-primary">Forgot Password</h3>

    <!-- Step 1: Validate User -->
    <div *ngIf="!validated">
      <p class="text-muted text-center">Enter your <b>Username</b> and <b>Email</b> to reset your password</p>
      <form>
        <div class="form-group mb-3">
          <label for="username">Username</label>
          <input type="text" id="username" [(ngModel)]="username" name="username"
            class="form-control" placeholder="Enter username" required />
        </div>

        <div class="form-group mb-3">
          <label for="email">Email</label>
          <input type="email" id="email" [(ngModel)]="email" name="email"
            class="form-control" placeholder="Enter email" required />
        </div>

        <button type="button" class="btn btn-primary w-100" (click)="validateUser()">Next</button>
      </form>
    </div>

    <!-- Step 2: Security Question -->
    <div *ngIf="validated && !verified">
      <p class="text-muted text-center">Answer your security question</p>
      <div class="alert alert-info">
        <b>Question:</b> {{ question }}
      </div>
      <div class="form-group mb-3">
        <label for="answer">Answer</label>
        <input type="text" id="answer" [(ngModel)]="answer" name="answer"
          class="form-control" placeholder="Enter your answer" required />
      </div>
      <button type="button" class="btn btn-success w-100" (click)="verifyAnswer()">Verify Answer</button>
    </div>

    <!-- Step 3: Reset Password -->
    <div *ngIf="verified">
      <p class="text-muted text-center">Enter a new password</p>
      <div class="form-group mb-3">
        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" [(ngModel)]="newPassword" name="newPassword"
          class="form-control" placeholder="Enter new password" required />
      </div>
      <button type="button" class="btn btn-primary w-100" (click)="resetPassword()">Reset Password</button>
    </div>
  </div>
</div>

<!--  Bootstrap Toast -->
<div class="toast-container position-fixed top-0 end-0 p-3" *ngIf="showToast">
  <div class="toast align-items-center border-0 show"
       [ngClass]="{
         'text-bg-success': toastType === 'success',
         'text-bg-danger': toastType === 'error',
         'text-bg-info': toastType === 'info'
       }">
    <div class="d-flex">
      <div class="toast-body">{{ toastMessage }}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto"
              (click)="showToast = false"></button>
    </div>
  </div>
</div>