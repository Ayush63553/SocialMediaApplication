{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction NotificationsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NotificationsComponent_ul_4_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 6);\n    i0.ɵɵelement(1, \"i\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const note_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", note_r4, \" \");\n  }\n}\nfunction NotificationsComponent_ul_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 4);\n    i0.ɵɵtemplate(1, NotificationsComponent_ul_4_li_1_Template, 3, 1, \"li\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.notifications);\n  }\n}\nfunction NotificationsComponent_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \" No new notifications. \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst BASE = 'http://localhost:8765';\nexport class NotificationsComponent {\n  constructor(http) {\n    this.http = http;\n    this.notificationsCountSubject = new BehaviorSubject(0);\n    this.notificationsCount$ = this.notificationsCountSubject.asObservable();\n    this.notifications = [];\n    this.loading = true;\n  }\n  ngOnInit() {\n    this.loadNotifications();\n  }\n  loadNotifications() {\n    const userId = localStorage.getItem('userId');\n    if (!userId) {\n      this.loading = false;\n      return;\n    }\n    this.http.get(`${BASE}/api/friend-requests/notifications/${userId}`).subscribe({\n      next: data => {\n        this.notifications = data;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Failed to load notifications', err);\n        this.loading = false;\n      }\n    });\n  }\n  updateCount(count) {\n    this.notificationsCountSubject.next(count);\n  }\n  static {\n    this.ɵfac = function NotificationsComponent_Factory(t) {\n      return new (t || NotificationsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NotificationsComponent,\n      selectors: [[\"app-notifications\"]],\n      decls: 6,\n      vars: 3,\n      consts: [[1, \"container\", \"mt-4\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [\"class\", \"list-group shadow-sm\", 4, \"ngIf\"], [1, \"text-muted\"], [1, \"list-group\", \"shadow-sm\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\"], [1, \"bi\", \"bi-bell-fill\", \"text-primary\", \"me-2\"]],\n      template: function NotificationsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n          i0.ɵɵtext(2, \"Notifications\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, NotificationsComponent_div_3_Template, 2, 0, \"div\", 1);\n          i0.ɵɵtemplate(4, NotificationsComponent_ul_4_Template, 2, 1, \"ul\", 2);\n          i0.ɵɵtemplate(5, NotificationsComponent_p_5_Template, 2, 0, \"p\", 1);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.notifications.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.notifications.length === 0);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf],\n      styles: [\"h3[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  margin-bottom: 15px;\\n}\\n\\n.list-group-item[_ngcontent-%COMP%] {\\n  border-left: 4px solid #3b5998;\\n  transition: background 0.2s;\\n}\\n\\n.list-group-item[_ngcontent-%COMP%]:hover {\\n  background-color: #f7f9fc;\\n  cursor: pointer;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvbm90aWZpY2F0aW9ucy9ub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSw4QkFBOEI7RUFDOUIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGVBQWU7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyJoMyB7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4ubGlzdC1ncm91cC1pdGVtIHtcclxuICBib3JkZXItbGVmdDogNHB4IHNvbGlkICMzYjU5OTg7XHJcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzO1xyXG59XHJcblxyXG4ubGlzdC1ncm91cC1pdGVtOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmOWZjO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate1","note_r4","ɵɵtemplate","NotificationsComponent_ul_4_li_1_Template","ɵɵproperty","ctx_r1","notifications","BASE","NotificationsComponent","constructor","http","notificationsCountSubject","notificationsCount$","asObservable","loading","ngOnInit","loadNotifications","userId","localStorage","getItem","get","subscribe","next","data","error","err","console","updateCount","count","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","NotificationsComponent_Template","rf","ctx","NotificationsComponent_div_3_Template","NotificationsComponent_ul_4_Template","NotificationsComponent_p_5_Template","length"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\notifications\\notifications\\notifications.component.ts","C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\notifications\\notifications\\notifications.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\nconst BASE = 'http://localhost:8765';\r\n\r\n@Component({\r\n  selector: 'app-notifications',\r\n  templateUrl: './notifications.component.html',\r\n  styleUrls: ['./notifications.component.css']\r\n})\r\nexport class NotificationsComponent implements OnInit {\r\n\r\n  private notificationsCountSubject = new BehaviorSubject<number>(0);\r\n  notificationsCount$ = this.notificationsCountSubject.asObservable();\r\n  notifications: string[] = [];\r\n  loading: boolean = true;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadNotifications();\r\n  }\r\n\r\n  loadNotifications(): void {\r\n    const userId = localStorage.getItem('userId');\r\n    if (!userId) {\r\n      this.loading = false;\r\n      return;\r\n    }\r\n\r\n    this.http.get<string[]>(`${BASE}/api/friend-requests/notifications/${userId}`)\r\n      .subscribe({\r\n        next: (data) => {\r\n          this.notifications = data;\r\n          this.loading = false;\r\n        },\r\n        error: (err) => {\r\n          console.error('Failed to load notifications', err);\r\n          this.loading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  updateCount(count : number): void {\r\n    this.notificationsCountSubject.next(count);\r\n  }\r\n}","<div class=\"container mt-4\">\r\n  <h3>Notifications</h3>\r\n\r\n  <div *ngIf=\"loading\" class=\"text-muted\">Loading...</div>\r\n\r\n  <ul *ngIf=\"!loading && notifications.length > 0\" class=\"list-group shadow-sm\">\r\n    <li *ngFor=\"let note of notifications\" class=\"list-group-item\">\r\n      <i class=\"bi bi-bell-fill text-primary me-2\"></i>\r\n      {{ note }}\r\n    </li>\r\n  </ul>\r\n\r\n  <p *ngIf=\"!loading && notifications.length === 0\" class=\"text-muted\">\r\n    No new notifications.\r\n  </p>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}