{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ViewPersonProfileComponent = class ViewPersonProfileComponent {\n  constructor(route, friendsService) {\n    this.route = route;\n    this.friendsService = friendsService;\n    this.profile = {\n      userId: 0,\n      username: '',\n      bio: '',\n      profilePictureUrl: '',\n      email: '',\n      firstName: '',\n      lastName: '',\n      dateOfBirth: new Date(),\n      gender: '',\n      relationshipStatus: ''\n    };\n    this.loading = true;\n    this.mutualFriends = [];\n    this.toggleFriends = false;\n    this.check = true;\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      this.userId = params.get('userId');\n      this.fetchProfile();\n    });\n  }\n  fetchProfile() {\n    this.friendsService.getProfile(this.userId).subscribe({\n      next: data => {\n        this.profile = data;\n        this.loading = false;\n      },\n      error: err => {\n        console.error('Error fetching profile', err);\n        this.loading = false;\n      }\n    });\n  }\n  toggle() {\n    this.toggleFriends = !this.toggleFriends;\n    if (this.check) this.fetchMutualFriends();\n  }\n  fetchMutualFriends() {\n    this.check = false;\n    this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), this.profile.userId).subscribe({\n      next: data => {\n        this.mutualFriends = data;\n      },\n      error: err => console.error('Error loading mutual friends', err)\n    });\n  }\n  addFriend() {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'), this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'REQUEST_SENT';\n    });\n  }\n  unfriend() {\n    this.friendsService.unFriend(localStorage.getItem('userId'), this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n  }\n  acceptRequest() {\n    this.friendsService.acceptFriendRequest(this.profile.userId, localStorage.getItem('userId')).subscribe(() => {\n      this.profile.relationshipStatus = 'FRIEND';\n    });\n  }\n  goToMutualFriendProfile() {\n    this.check = true;\n    this.toggleFriends = false;\n  }\n};\nViewPersonProfileComponent = __decorate([Component({\n  selector: 'app-view-person-profile',\n  templateUrl: './view-person-profile.component.html',\n  styleUrls: ['./view-person-profile.component.css']\n})], ViewPersonProfileComponent);","map":{"version":3,"names":["Component","ViewPersonProfileComponent","constructor","route","friendsService","profile","userId","username","bio","profilePictureUrl","email","firstName","lastName","dateOfBirth","Date","gender","relationshipStatus","loading","mutualFriends","toggleFriends","check","ngOnInit","paramMap","subscribe","params","get","fetchProfile","getProfile","next","data","error","err","console","toggle","fetchMutualFriends","findMutualFriend","localStorage","getItem","addFriend","sendFriendRequest","unfriend","unFriend","acceptRequest","acceptFriendRequest","goToMutualFriendProfile","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\view-person-profile\\view-person-profile.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Friend, FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\n\n@Component({\n  selector: 'app-view-person-profile',\n  templateUrl: './view-person-profile.component.html',\n  styleUrls: ['./view-person-profile.component.css']\n})\n\nexport class ViewPersonProfileComponent implements OnInit{\n\n\n  userId!: string;\n\n  profile: UserDTO={\n    userId:0,\n    username:'',\n    bio:'',\n    profilePictureUrl:'',\n    email:'',\n    firstName:'',\n    lastName:'',\n    dateOfBirth:new Date(),\n    gender:'',\n    relationshipStatus:''\n  };\n\n  loading = true;\n\n  constructor(private route: ActivatedRoute, private friendsService: FriendsService) {}\n\n  ngOnInit(): void {\n\n    this.route.paramMap.subscribe(params => {\n\n      this.userId = params.get('userId')!;\n\n      this.fetchProfile();\n\n    });\n\n  }\n\n  fetchProfile(): void {\n\n    this.friendsService.getProfile(this.userId).subscribe({\n\n      next: (data) => {\n\n        this.profile = data;\n\n        this.loading = false;\n\n      },\n\n      error: (err) => {\n\n        console.error('Error fetching profile', err);\n\n        this.loading = false;\n\n      }\n\n    });\n\n  }\n  mutualFriends:UserDTO[]=[];\n  toggleFriends:boolean=false;\n\n  toggle(){\n    this.toggleFriends=!this.toggleFriends;\n    if(this.check) this.fetchMutualFriends();\n  }\n  check:boolean=true;\n  fetchMutualFriends(){\n    this.check=false;    \n    this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),this.profile.userId).subscribe({\n          next: (data) => {\n            this.mutualFriends =data;\n          },\n          error: (err) => console.error('Error loading mutual friends', err)\n          });\n  }\n\n  addFriend(): void {\n\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'),this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'REQUEST_SENT';\n    });\n\n  }\n\n  unfriend(): void {\n    this.friendsService.unFriend(localStorage.getItem('userId'),this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n\n  }\n\n  acceptRequest(): void {\n    this.friendsService.acceptFriendRequest(this.profile.userId,localStorage.getItem('userId')).subscribe(() => {\n      this.profile.relationshipStatus = 'FRIEND';\n    });\n  }\n\n  goToMutualFriendProfile(){\n    this.check=true;\n    this.toggleFriends=false;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}