{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FindFriendsComponent = class FindFriendsComponent {\n  constructor(friendsService) {\n    this.friendsService = friendsService;\n    this.allFriends = [];\n    this.filteredFriends = [];\n    this.searchText = '';\n    this.expanded = {};\n    this.mutualFriendsMap = {}; // store loaded lists\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.loadFriends();\n  }\n  loadFriends() {\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\n      next: data => {\n        this.filteredFriends = data;\n        this.allFriends = data;\n        for (let i of this.filteredFriends) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Error loading friends', err)\n    });\n  }\n  onSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.filteredFriends = this.allFriends.filter(friend => friend.username.toLowerCase().includes(text));\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n    if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n      this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), friendId).subscribe({\n        next: data => this.mutualFriendsMap[friendId] = data,\n        error: err => console.error('Error loading mutual friends', err)\n      });\n    }\n  }\n  sendRequest(friend) {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'), friend.userId).subscribe({\n      next: () => {\n        alert(`Friend request sent to ${friend.username}`);\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\n      },\n      error: err => {\n        alert('Failed to send request');\n        console.error(err);\n      }\n    });\n  }\n};\nFindFriendsComponent = __decorate([Component({\n  selector: 'app-find-friends',\n  templateUrl: './find-friends.component.html',\n  styleUrls: ['./find-friends.component.css']\n})], FindFriendsComponent);","map":{"version":3,"names":["Component","FindFriendsComponent","constructor","friendsService","allFriends","filteredFriends","searchText","expanded","mutualFriendsMap","ObjectKeys","Object","keys","ngOnInit","loadFriends","findFriends","localStorage","getItem","subscribe","next","data","i","findMutualFriend","userId","error","err","console","onSearchChange","text","toLowerCase","filter","friend","username","includes","toggleDropdown","friendId","sendRequest","sendFriendRequest","alert","f","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\find-friends\\find-friends.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Friend, FriendsService } from 'src/app/core/services/Friends/friends.service';\r\nimport { AuthService } from 'src/app/core/services/Login/authLogin.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-find-friends',\r\n  templateUrl: './find-friends.component.html',\r\n  styleUrls: ['./find-friends.component.css']\r\n})\r\nexport class FindFriendsComponent implements OnInit {\r\n\r\n  allFriends: Friend[] = [];\r\n\r\n  filteredFriends: Friend[] = [];\r\n\r\n  searchText: string = '';\r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n\r\n  mutualFriendsMap: { [userId: number]: Friend[] } = {}; // store loaded lists\r\n\r\n  constructor(private friendsService: FriendsService) {}\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadFriends();\r\n\r\n  }\r\n\r\n  loadFriends(): void {\r\n\r\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\r\n\r\n      next: (data) => {\r\n\r\n\r\n        this.filteredFriends = data;  \r\n        this.allFriends=data; \r\n        for(let i of this.filteredFriends){\r\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),i.userId).subscribe({\r\n  \r\n          next: (data) => {\r\n            this.mutualFriendsMap[i.userId] =data;\r\n          },\r\n          error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n          });    \r\n        }\r\n      },\r\n\r\n      error: (err) => console.error('Error loading friends', err)\r\n\r\n    });\r\n\r\n  }\r\n\r\n  onSearchChange(): void {\r\n\r\n    const text = this.searchText.toLowerCase();\r\n\r\n    this.filteredFriends = this.allFriends.filter(friend =>\r\n\r\n      friend.username.toLowerCase().includes(text)\r\n\r\n    );\r\n\r\n  }\r\n\r\n  toggleDropdown(friendId: number): void {\r\n\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n\r\n    if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\r\n\r\n      this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\r\n\r\n        next: (data) => (this.mutualFriendsMap[friendId] =data),\r\n\r\n        error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  sendRequest(friend: Friend): void {\r\n\r\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'),friend.userId).subscribe({\r\n\r\n      next: () => {\r\n\r\n        alert(`Friend request sent to ${friend.username}`);\r\n\r\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\r\n\r\n      },\r\n\r\n      error: (err) => {\r\n\r\n        alert('Failed to send request');\r\n\r\n        console.error(err);\r\n\r\n      }\r\n\r\n    });\r\n    \r\n  }\r\n  \r\n  ObjectKeys=Object.keys;\r\n\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}