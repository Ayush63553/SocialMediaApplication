{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let BlockListComponent = class BlockListComponent {\n  constructor(friendsService, router, cdRef) {\n    this.friendsService = friendsService;\n    this.router = router;\n    this.cdRef = cdRef;\n    this.allBlockedUsers = [];\n    this.filteredBlockedUsers = [];\n    this.searchText = '';\n    this.extended = {};\n    this.mutualFriendsMap = {}; // store loaded lists\n    // Toast state\n    this.toastMessage = '';\n    this.toastType = 'info';\n    this.showToast = false;\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.loadBlockedUsers();\n  }\n  showToaster(message, type = 'info') {\n    this.toastMessage = message;\n    this.toastType = type;\n    this.showToast = true;\n    this.cdRef.detectChanges();\n    setTimeout(() => {\n      this.showToast = false;\n      this.cdRef.detectChanges();\n    }, 3000);\n  }\n  viewProfile(blockedUser) {\n    this.showToaster(`üë§ Viewing profile of ${blockedUser.username}`, 'info');\n    this.router.navigate(['friends/profile', blockedUser.userId]);\n  }\n  loadBlockedUsers() {\n    this.friendsService.getBlockedUsers(localStorage.getItem(\"userId\")).subscribe({\n      next: data => {\n        this.filteredBlockedUsers = data;\n        this.allBlockedUsers = data;\n        for (let i of this.filteredBlockedUsers) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: error => {\n              console.error('Error fetching mutual friends:', error);\n            }\n          });\n        }\n      },\n      error: error => {\n        console.error('Error fetching blocked users:', error);\n      }\n    });\n  }\n  OnSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.filteredBlockedUsers = this.allBlockedUsers.filter(user => user.username.toLowerCase().includes(text));\n  }\n  toggleDropdown(userId) {\n    this.extended[userId] = !this.extended[userId];\n  }\n  unBlockUser(blockedUser) {\n    this.friendsService.unBlockUser(localStorage.getItem(\"userId\"), blockedUser.userId).subscribe({\n      next: () => {\n        this.showToaster(`‚úÖ Unblocked ${blockedUser.username}`, 'success');\n        this.filteredBlockedUsers = this.filteredBlockedUsers.filter(f => f.userId !== blockedUser.userId);\n        // this.loadBlockedUsers(); // Refresh the block list\n      },\n\n      error: error => {\n        console.error('Error unblocking user:', error);\n        this.showToaster(`‚ùå Failed to unblock ${blockedUser.username}`, 'error');\n      }\n    });\n  }\n};\nBlockListComponent = __decorate([Component({\n  selector: 'app-block-list',\n  templateUrl: './block-list.component.html',\n  styleUrls: ['./block-list.component.css']\n})], BlockListComponent);","map":{"version":3,"names":["Component","BlockListComponent","constructor","friendsService","router","cdRef","allBlockedUsers","filteredBlockedUsers","searchText","extended","mutualFriendsMap","toastMessage","toastType","showToast","ObjectKeys","Object","keys","ngOnInit","loadBlockedUsers","showToaster","message","type","detectChanges","setTimeout","viewProfile","blockedUser","username","navigate","userId","getBlockedUsers","localStorage","getItem","subscribe","next","data","i","findMutualFriend","error","console","OnSearchChange","text","toLowerCase","filter","user","includes","toggleDropdown","unBlockUser","f","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\block-list\\block-list.component.ts"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\n\n@Component({\n  selector: 'app-block-list',\n  templateUrl: './block-list.component.html',\n  styleUrls: ['./block-list.component.css']\n})\nexport class BlockListComponent implements OnInit {\n  allBlockedUsers: UserDTO[] = [];\n  filteredBlockedUsers: UserDTO[] = [];\n  searchText: string = '';\n\n  extended: { [userId: number]: boolean } = {};\n  mutualFriendsMap: { [userId: number]: UserDTO[] } = {}; // store loaded lists\n  \n  // Toast state\n  toastMessage: string = '';\n  toastType: 'success' | 'error' | 'info' = 'info';\n  showToast: boolean = false;\n\n  constructor(\n    private friendsService: FriendsService,\n    private router: Router,\n    private cdRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    this.loadBlockedUsers();\n  }\n\n  private showToaster(message: string, type: 'success' | 'error' | 'info' = 'info') {\n    this.toastMessage = message;\n    this.toastType = type;\n    this.showToast = true;\n    this.cdRef.detectChanges();\n    setTimeout(() => {\n      this.showToast = false;\n      this.cdRef.detectChanges();\n    }, 3000);\n  }\n\n  viewProfile(blockedUser: UserDTO): void {\n    this.showToaster(`üë§ Viewing profile of ${blockedUser.username}`, 'info');\n    this.router.navigate(['friends/profile', blockedUser.userId]);\n  }\n\n  loadBlockedUsers(): void {\n    this.friendsService.getBlockedUsers(localStorage.getItem(\"userId\")).subscribe({\n      next: (data) => {\n        this.filteredBlockedUsers = data;  \n        this.allBlockedUsers = data; \n        for (let i of this.filteredBlockedUsers) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: (data) => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: (error) => {\n              console.error('Error fetching mutual friends:', error);\n            }\n          });\n        }\n      },\n      error: (error) => {\n        console.error('Error fetching blocked users:', error);\n      }\n    });\n  }\n\n  OnSearchChange(): void {\n    const text = this.searchText.toLowerCase();\n    this.filteredBlockedUsers = this.allBlockedUsers.filter(user =>\n      user.username.toLowerCase().includes(text)\n    );\n  }\n  \n  toggleDropdown(userId: number): void {\n    this.extended[userId] = !this.extended[userId];\n  }\n\n  unBlockUser(blockedUser: UserDTO): void {\n    this.friendsService.unBlockUser(localStorage.getItem(\"userId\"), blockedUser.userId).subscribe({\n      next: () => {\n        this.showToaster(`‚úÖ Unblocked ${blockedUser.username}`, 'success');\n        this.filteredBlockedUsers = this.filteredBlockedUsers.filter(f => f.userId !== blockedUser.userId);\n      \n        // this.loadBlockedUsers(); // Refresh the block list\n      },\n      error: (error) => {\n        console.error('Error unblocking user:', error);\n        this.showToaster(`‚ùå Failed to unblock ${blockedUser.username}`, 'error');\n      }\n    });\n  }\n\n  ObjectKeys=Object.keys;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}