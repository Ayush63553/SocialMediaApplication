{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../profile/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/core/services/Friends/friends.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction FeedComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"h4\");\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"p\", 8);\n    i0.ÉµÉµtext(5, \"You don\\u2019t have any posts or friends yet. Start by finding people you may know!\");\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\"Welcome, \", ctx_r0.loggedInUsername, \" \\uD83C\\uDF89\");\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_14_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"img\", 31);\n  }\n  if (rf & 2) {\n    const post_r5 = i0.ÉµÉµnextContext(2).$implicit;\n    i0.ÉµÉµproperty(\"src\", post_r5.mediaUrl, i0.ÉµÉµsanitizeUrl);\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_14_video_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"video\", 32);\n  }\n  if (rf & 2) {\n    const post_r5 = i0.ÉµÉµnextContext(2).$implicit;\n    i0.ÉµÉµproperty(\"src\", post_r5.mediaUrl, i0.ÉµÉµsanitizeUrl);\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 28);\n    i0.ÉµÉµtemplate(1, FeedComponent_div_3_ng_container_1_div_14_img_1_Template, 1, 1, \"img\", 29);\n    i0.ÉµÉµtemplate(2, FeedComponent_div_3_ng_container_1_div_14_video_2_Template, 1, 1, \"video\", 30);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const post_r5 = i0.ÉµÉµnextContext().$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", post_r5.mediaType == null ? null : post_r5.mediaType.startsWith(\"image\"));\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", post_r5.mediaType == null ? null : post_r5.mediaType.startsWith(\"video\"));\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_34_div_5_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 44);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_3_ng_container_1_div_34_div_5_button_10_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r18);\n      const comment_r14 = i0.ÉµÉµnextContext().$implicit;\n      const post_r5 = i0.ÉµÉµnextContext(2).$implicit;\n      const ctx_r16 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r16.deleteComment(post_r5, comment_r14));\n    });\n    i0.ÉµÉµtext(1, \" Delete \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_34_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 39);\n    i0.ÉµÉµelement(1, \"img\", 40);\n    i0.ÉµÉµelementStart(2, \"div\", 41)(3, \"div\", 42)(4, \"strong\");\n    i0.ÉµÉµtext(5);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"div\")(7, \"small\", 8);\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµpipe(9, \"date\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(10, FeedComponent_div_3_ng_container_1_div_34_div_5_button_10_Template, 2, 0, \"button\", 43);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(11, \"div\");\n    i0.ÉµÉµtext(12);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const comment_r14 = ctx.$implicit;\n    const post_r5 = i0.ÉµÉµnextContext(2).$implicit;\n    const ctx_r13 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"src\", comment_r14.profilePictureUrl || \"assets/images/default-avatar.png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate(comment_r14.username);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind2(9, 5, comment_r14.createdAt, \"dd MMM yyyy, hh:mm a\"));\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r13.canDeleteComment(post_r5, comment_r14));\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(comment_r14.content);\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 33)(1, \"div\", 34)(2, \"textarea\", 35);\n    i0.ÉµÉµlistener(\"ngModelChange\", function FeedComponent_div_3_ng_container_1_div_34_Template_textarea_ngModelChange_2_listener($event) {\n      i0.ÉµÉµrestoreView(_r22);\n      const post_r5 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r21 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r21.newCommentText[post_r5.postId] = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"button\", 36);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_3_ng_container_1_div_34_Template_button_click_3_listener() {\n      i0.ÉµÉµrestoreView(_r22);\n      const post_r5 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r24 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r24.addComment(post_r5));\n    });\n    i0.ÉµÉµelement(4, \"i\", 37);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(5, FeedComponent_div_3_ng_container_1_div_34_div_5_Template, 13, 8, \"div\", 38);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const post_r5 = i0.ÉµÉµnextContext().$implicit;\n    const ctx_r7 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r7.newCommentText[post_r5.postId]);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r7.commentsMap[post_r5.postId]);\n  }\n}\nfunction FeedComponent_div_3_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµelementStart(1, \"div\", 11)(2, \"div\", 12)(3, \"div\", 13);\n    i0.ÉµÉµelement(4, \"img\", 14);\n    i0.ÉµÉµelementStart(5, \"div\")(6, \"h6\", 15)(7, \"strong\");\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(9, \"small\", 8);\n    i0.ÉµÉµtext(10);\n    i0.ÉµÉµpipe(11, \"date\");\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(12, \"p\");\n    i0.ÉµÉµtext(13);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(14, FeedComponent_div_3_ng_container_1_div_14_Template, 3, 2, \"div\", 16);\n    i0.ÉµÉµelementStart(15, \"div\", 17)(16, \"div\");\n    i0.ÉµÉµelement(17, \"i\", 18);\n    i0.ÉµÉµelementStart(18, \"span\", 19);\n    i0.ÉµÉµtext(19);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(20, \"div\")(21, \"span\", 20);\n    i0.ÉµÉµtext(22);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelement(23, \"hr\");\n    i0.ÉµÉµelementStart(24, \"div\", 21)(25, \"button\", 22);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_3_ng_container_1_Template_button_click_25_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r28);\n      const post_r5 = restoredCtx.$implicit;\n      const ctx_r27 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r27.toggleLike(post_r5));\n    });\n    i0.ÉµÉµelement(26, \"i\", 23);\n    i0.ÉµÉµtext(27);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(28, \"button\", 22);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_3_ng_container_1_Template_button_click_28_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r28);\n      const post_r5 = restoredCtx.$implicit;\n      const ctx_r29 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r29.dislikePost(post_r5));\n    });\n    i0.ÉµÉµelement(29, \"i\", 24);\n    i0.ÉµÉµtext(30, \" Dislike \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(31, \"button\", 25);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_3_ng_container_1_Template_button_click_31_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r28);\n      const post_r5 = restoredCtx.$implicit;\n      const ctx_r30 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r30.toggleComments(post_r5));\n    });\n    i0.ÉµÉµelement(32, \"i\", 26);\n    i0.ÉµÉµtext(33, \" Comments \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(34, FeedComponent_div_3_ng_container_1_div_34_Template, 6, 2, \"div\", 27);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const post_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"src\", post_r5.profilePictureUrl || \"assets/images/default-avatar.png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµtextInterpolate(post_r5.username);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(i0.ÉµÉµpipeBind2(11, 10, post_r5.createdAt, \"dd MMM yyyy, hh:mm a\"));\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(post_r5.content);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", post_r5.mediaUrl);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate(post_r5.likeCount || 0);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\"\", ctx_r4.commentsMap[post_r5.postId].length || 0, \" comments\");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngClass\", post_r5.likedByUsers.includes(ctx_r4.loggedInUsername) ? \"bi-hand-thumbs-up-fill text-primary\" : \"bi-hand-thumbs-up\");\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\" \", post_r5.likedByUsers.includes(ctx_r4.loggedInUsername) ? \"Liked\" : \"Like\", \" \");\n    i0.ÉµÉµadvance(7);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r4.showCommentsMap[post_r5.postId]);\n  }\n}\nfunction FeedComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 9);\n    i0.ÉµÉµtemplate(1, FeedComponent_div_3_ng_container_1_Template, 35, 13, \"ng-container\", 10);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r1.posts);\n  }\n}\nfunction FeedComponent_div_4_li_6_div_9_ul_5_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"li\", 64);\n    i0.ÉµÉµelement(1, \"img\", 65);\n    i0.ÉµÉµelementStart(2, \"span\", 66);\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"button\", 67);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_4_li_6_div_9_ul_5_li_1_Template_button_click_4_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r41);\n      const mf_r39 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ÉµÉµnextContext(5);\n      return i0.ÉµÉµresetView(ctx_r40.viewProfile(mf_r39));\n    });\n    i0.ÉµÉµtext(5, \" View Profile \");\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const mf_r39 = ctx.$implicit;\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"src\", mf_r39.profilePictureUrl || \"assets/default-avatar.png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(mf_r39.username);\n  }\n}\nfunction FeedComponent_div_4_li_6_div_9_ul_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"ul\", 62);\n    i0.ÉµÉµtemplate(1, FeedComponent_div_4_li_6_div_9_ul_5_li_1_Template, 6, 2, \"li\", 63);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const friend_r35 = i0.ÉµÉµnextContext(2).$implicit;\n    const ctx_r37 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r37.mutualFriendsMap[friend_r35.userId]);\n  }\n}\nfunction FeedComponent_div_4_li_6_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r45 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 58)(1, \"small\", 59);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_4_li_6_div_9_Template_small_click_1_listener() {\n      i0.ÉµÉµrestoreView(_r45);\n      const friend_r35 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r43 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r43.toggleDropdown(friend_r35.userId));\n    });\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementStart(3, \"span\", 60);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(5, FeedComponent_div_4_li_6_div_9_ul_5_Template, 2, 1, \"ul\", 61);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const friend_r35 = i0.ÉµÉµnextContext().$implicit;\n    const ctx_r36 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r36.expanded[friend_r35.userId] ? \"Hide Mutual Friends \\uD83D\\uDD3C\" : \"Show Mutual Friends \\uD83D\\uDD3D\", \" \");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r36.mutualFriendsMap[friend_r35.userId].length, \" \");\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r36.expanded[friend_r35.userId]);\n  }\n}\nfunction FeedComponent_div_4_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"li\", 53)(1, \"div\", 54);\n    i0.ÉµÉµelement(2, \"img\", 40);\n    i0.ÉµÉµelementStart(3, \"span\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(5, \"span\")(6, \"button\", 55);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_4_li_6_Template_button_click_6_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r48);\n      const friend_r35 = restoredCtx.$implicit;\n      const ctx_r47 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r47.viewProfile(friend_r35));\n    });\n    i0.ÉµÉµelement(7, \"i\", 56);\n    i0.ÉµÉµtext(8, \" View \");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµtemplate(9, FeedComponent_div_4_li_6_div_9_Template, 6, 3, \"div\", 57);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const friend_r35 = ctx.$implicit;\n    const ctx_r31 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", friend_r35.profilePictureUrl || \"assets/images/default-avatar.png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(friend_r35.username);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r31.mutualFriendsMap[friend_r35.userId] && ctx_r31.mutualFriendsMap[friend_r35.userId].length > 0);\n  }\n}\nfunction FeedComponent_div_4_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\", 68);\n    i0.ÉµÉµtext(1, \"No friends yet\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction FeedComponent_div_4_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r51 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"li\", 53)(1, \"div\", 54);\n    i0.ÉµÉµelement(2, \"img\", 40);\n    i0.ÉµÉµelementStart(3, \"span\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(5, \"span\")(6, \"button\", 69);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_4_li_13_Template_button_click_6_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r51);\n      const user_r49 = restoredCtx.$implicit;\n      const ctx_r50 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r50.viewProfile(user_r49));\n    });\n    i0.ÉµÉµelement(7, \"i\", 56);\n    i0.ÉµÉµtext(8, \" View \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"button\", 55);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_4_li_13_Template_button_click_9_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r51);\n      const user_r49 = restoredCtx.$implicit;\n      const ctx_r52 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r52.sendFriendRequest(user_r49.userId));\n    });\n    i0.ÉµÉµtext(10, \" Add Friend \");\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r49 = ctx.$implicit;\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", user_r49.profilePictureUrl || \"assets/images/default-avatar.png\", i0.ÉµÉµsanitizeUrl);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(user_r49.username);\n  }\n}\nfunction FeedComponent_div_4_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"li\", 68);\n    i0.ÉµÉµtext(1, \"No suggestions\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction FeedComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 45)(1, \"div\", 46)(2, \"div\", 47)(3, \"strong\");\n    i0.ÉµÉµtext(4, \"Your Friends\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(5, \"ul\", 48);\n    i0.ÉµÉµtemplate(6, FeedComponent_div_4_li_6_Template, 10, 3, \"li\", 49);\n    i0.ÉµÉµtemplate(7, FeedComponent_div_4_li_7_Template, 2, 0, \"li\", 50);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(8, \"div\", 51)(9, \"div\", 52)(10, \"strong\");\n    i0.ÉµÉµtext(11, \"People You May Know\");\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(12, \"ul\", 48);\n    i0.ÉµÉµtemplate(13, FeedComponent_div_4_li_13_Template, 11, 2, \"li\", 49);\n    i0.ÉµÉµtemplate(14, FeedComponent_div_4_li_14_Template, 2, 0, \"li\", 50);\n    i0.ÉµÉµelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.friends);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.friends.length === 0);\n    i0.ÉµÉµadvance(6);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.suggestions);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r2.suggestions.length === 0);\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"text-bg-success\": a0,\n    \"text-bg-danger\": a1,\n    \"text-bg-info\": a2\n  };\n};\nfunction FeedComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r54 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"div\", 70)(1, \"div\", 71)(2, \"div\", 72)(3, \"div\", 73);\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"button\", 74);\n    i0.ÉµÉµlistener(\"click\", function FeedComponent_div_5_Template_button_click_5_listener() {\n      i0.ÉµÉµrestoreView(_r54);\n      const ctx_r53 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r53.showToast = false);\n    });\n    i0.ÉµÉµelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"ngClass\", i0.ÉµÉµpureFunction3(2, _c0, ctx_r3.toastType === \"success\", ctx_r3.toastType === \"error\", ctx_r3.toastType === \"info\"));\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate(ctx_r3.toastMessage);\n  }\n}\nconst BASE = 'http://localhost:8765';\nexport class FeedComponent {\n  constructor(http, userService, cdRef, router, friendsService) {\n    this.http = http;\n    this.userService = userService;\n    this.cdRef = cdRef;\n    this.router = router;\n    this.friendsService = friendsService;\n    this.posts = [];\n    this.friends = [];\n    this.suggestions = [];\n    this.commentsMap = {};\n    this.showCommentsMap = {};\n    this.newCommentText = {};\n    this.isNewUser = false;\n    // âœ… Toast state\n    this.toastMessage = '';\n    this.toastType = 'info';\n    this.showToast = false;\n    this.expanded = {};\n    this.mutualFriendsMap = {};\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.userService.getUser(localStorage.getItem('userId')).subscribe({\n      next: user => {\n        this.loggedInUserId = user.userId;\n        this.loggedInUsername = user.username;\n        this.loadFeed();\n        this.loadFriends();\n        this.loadSuggestions();\n      },\n      error: err => console.error('Failed to load logged-in user', err)\n    });\n  }\n  showToaster(message, type = 'info') {\n    this.toastMessage = message;\n    this.toastType = type;\n    this.showToast = true;\n    this.cdRef.detectChanges();\n    setTimeout(() => {\n      this.showToast = false;\n      this.cdRef.detectChanges();\n    }, 3000);\n  }\n  // Load posts (friends + own posts)\n  loadFeed() {\n    this.http.get(`${BASE}/api/posts/feed/${this.loggedInUserId}`).subscribe(data => {\n      this.posts = data.map(p => ({\n        ...p,\n        likedByUsers: p.likedByUsers || [],\n        comments: p.comments || []\n      }));\n      this.posts.forEach(p => {\n        this.showCommentsMap[p.postId] = false;\n        this.commentsMap[p.postId] = p.comments || [];\n      });\n      // Check if new user (no friends and no posts)\n      this.isNewUser = this.posts.length === 0 && this.friends.length === 0;\n    }, err => console.error('Failed to load posts', err));\n  }\n  // Load friends\n  loadFriends() {\n    this.userService.getFriends(this.loggedInUserId).subscribe({\n      next: friends => {\n        this.friends = friends;\n        this.isNewUser = this.posts.length === 0 && this.friends.length === 0;\n        for (let i of this.friends) {\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Failed to load friends', err)\n    });\n  }\n  viewProfile(friend) {\n    this.showToaster(`ðŸ‘¤ Viewing profile of ${friend.username}`, 'info');\n    this.router.navigate(['friends/profile', friend.userId]);\n  }\n  // Load friend suggestions\n  loadSuggestions() {\n    this.userService.getFriendSuggestions(this.loggedInUserId).subscribe({\n      next: users => {\n        this.suggestions = users;\n      },\n      error: err => console.error('Failed to load suggestions', err)\n    });\n  }\n  // Send friend request\n  sendFriendRequest(receiverId) {\n    this.userService.sendFriendRequest(this.loggedInUserId, receiverId).subscribe({\n      next: () => {\n        this.suggestions = this.suggestions.filter(u => u.userId !== receiverId);\n        this.showToaster('âœ… Friend request sent!', 'success');\n      },\n      error: err => {\n        console.error('Failed to send friend request', err);\n        this.showToaster('âŒ Failed to send friend request', 'error');\n      }\n    });\n  }\n  // Toggle like/unlike\n  toggleLike(post) {\n    const payload = {\n      postId: post.postId,\n      userId: this.loggedInUserId\n    };\n    if (post.likedByUsers.includes(this.loggedInUsername)) {\n      this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`).subscribe(() => {\n        post.likeCount = Math.max(0, post.likeCount - 1);\n        post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\n      }, err => console.error('Failed to unlike', err));\n    } else {\n      this.http.post(`${BASE}/api/likes`, payload).subscribe({\n        next: res => {\n          post.likeCount = res?.likeCount ?? post.likeCount + 1;\n          if (!post.likedByUsers.includes(this.loggedInUsername)) {\n            post.likedByUsers.push(this.loggedInUsername);\n          }\n        },\n        error: err => console.error('Failed to like', err)\n      });\n    }\n  }\n  // Dislike = unlike\n  dislikePost(post) {\n    this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`, {\n      responseType: 'text'\n    }).subscribe(() => {\n      if (post.likedByUsers.includes(this.loggedInUsername)) {\n        post.likeCount = Math.max(0, post.likeCount - 1);\n        post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\n      }\n    }, err => console.error('Dislike failed', err));\n  }\n  // Toggle comments\n  toggleComments(post) {\n    this.showCommentsMap[post.postId] = !this.showCommentsMap[post.postId];\n    if (this.showCommentsMap[post.postId]) {\n      this.loadComments(post.postId);\n    }\n  }\n  // Load comments\n  loadComments(postId) {\n    this.http.get(`${BASE}/api/comments/post/${postId}`).subscribe(data => {\n      this.commentsMap[postId] = data.map(c => ({\n        ...c,\n        username: c.username || `User ${c.userId}`\n      }));\n    }, err => console.error('Failed to load comments', err));\n  }\n  // Add comment\n  addComment(post) {\n    const text = (this.newCommentText[post.postId] || '').trim();\n    if (!text) return;\n    const payload = {\n      postId: post.postId,\n      userId: this.loggedInUserId,\n      content: text\n    };\n    this.http.post(`${BASE}/api/comments`, payload).subscribe(created => {\n      created.username = this.loggedInUsername;\n      this.commentsMap[post.postId] = this.commentsMap[post.postId] || [];\n      this.commentsMap[post.postId].push(created);\n      this.newCommentText[post.postId] = '';\n    }, err => console.error('Failed to add comment', err));\n  }\n  // Delete comment\n  deleteComment(post, comment) {\n    this.http.delete(`${BASE}/api/comments/${comment.commentId}?userId=${this.loggedInUserId}`).subscribe(() => {\n      this.commentsMap[post.postId] = this.commentsMap[post.postId].filter(c => c.commentId !== comment.commentId);\n      this.showToaster('ðŸ—‘ï¸ Comment deleted', 'info');\n    }, err => console.error('Failed to delete comment', err));\n  }\n  canDeleteComment(post, comment) {\n    return comment.userId === this.loggedInUserId || post.userId === this.loggedInUserId;\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n  }\n  static {\n    this.Éµfac = function FeedComponent_Factory(t) {\n      return new (t || FeedComponent)(i0.ÉµÉµdirectiveInject(i1.HttpClient), i0.ÉµÉµdirectiveInject(i2.UserService), i0.ÉµÉµdirectiveInject(i0.ChangeDetectorRef), i0.ÉµÉµdirectiveInject(i3.Router), i0.ÉµÉµdirectiveInject(i4.FriendsService));\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: FeedComponent,\n      selectors: [[\"app-feed\"]],\n      decls: 6,\n      vars: 4,\n      consts: [[1, \"container\", \"my-4\"], [1, \"row\"], [\"class\", \"col-md-12\", 4, \"ngIf\"], [\"class\", \"col-md-8\", 4, \"ngIf\"], [\"class\", \"col-md-4\", 4, \"ngIf\"], [\"class\", \"toast-container position-fixed top-0 end-0 p-3\", 4, \"ngIf\"], [1, \"col-md-12\"], [1, \"card\", \"text-center\", \"shadow-sm\", \"p-4\"], [1, \"text-muted\"], [1, \"col-md-8\"], [4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"shadow-sm\", \"rounded-3\", \"mb-4\"], [1, \"card-body\"], [1, \"d-flex\", \"align-items-center\", \"mb-2\"], [1, \"rounded-circle\", \"me-2\", 2, \"width\", \"3rem\", \"height\", \"3rem\", 3, \"src\"], [1, \"mb-0\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mt-2\"], [1, \"bi\", \"bi-hand-thumbs-up-fill\", \"text-primary\", \"me-1\"], [1, \"small\"], [1, \"small\", \"text-muted\"], [1, \"d-flex\", \"justify-content-around\", \"text-muted\"], [1, \"btn\", \"btn-light\", \"btn-sm\", \"w-100\", \"me-1\", 3, \"click\"], [1, \"bi\", 3, \"ngClass\"], [1, \"bi\", \"bi-hand-thumbs-down\"], [1, \"btn\", \"btn-light\", \"btn-sm\", \"w-100\", 3, \"click\"], [1, \"bi\", \"bi-chat-dots\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [1, \"mb-3\"], [\"class\", \"img-fluid rounded shadow-sm\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"w-100 rounded shadow-sm\", \"controls\", \"\", 3, \"src\", 4, \"ngIf\"], [1, \"img-fluid\", \"rounded\", \"shadow-sm\", 3, \"src\"], [\"controls\", \"\", 1, \"w-100\", \"rounded\", \"shadow-sm\", 3, \"src\"], [1, \"mt-3\"], [1, \"input-group\", \"mb-3\"], [\"rows\", \"1\", \"placeholder\", \"Write a comment...\", 1, \"form-control\", \"me-2\", 3, \"ngModel\", \"ngModelChange\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"bi\", \"bi-send\"], [\"class\", \"d-flex align-items-start mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"align-items-start\", \"mb-2\"], [1, \"rounded-circle\", \"me-2\", 2, \"width\", \"30px\", \"height\", \"30px\", 3, \"src\"], [1, \"bg-light\", \"rounded\", \"p-2\", \"w-100\"], [1, \"d-flex\", \"justify-content-between\"], [\"class\", \"btn btn-sm btn-link text-danger\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-link\", \"text-danger\", 3, \"click\"], [1, \"col-md-4\"], [1, \"card\", \"mb-3\", \"shadow-sm\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"list-group\", \"list-group-flush\"], [\"class\", \"list-group-item d-flex align-items-center justify-content-between\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"list-group-item text-muted\", 4, \"ngIf\"], [1, \"card\", \"shadow-sm\"], [1, \"card-header\", \"bg-success\", \"text-white\"], [1, \"list-group-item\", \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-center\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [1, \"bi\", \"bi-person\"], [\"class\", \"card-footer bg-light border-0\", 4, \"ngIf\"], [1, \"card-footer\", \"bg-light\", \"border-0\"], [1, \"text-primary\", \"fw-semibold\", \"cursor-pointer\", 3, \"click\"], [1, \"badge\", \"bg-secondary\", \"ms-1\"], [\"class\", \"list-group list-group-flush mt-3\", 4, \"ngIf\"], [1, \"list-group\", \"list-group-flush\", \"mt-3\"], [\"class\", \"list-group-item d-flex align-items-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"d-flex\", \"align-items-center\"], [\"width\", \"40\", \"height\", \"40\", 1, \"rounded-circle\", \"border\", \"me-3\", 3, \"src\"], [1, \"fw-semibold\"], [1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"ms-auto\", 3, \"click\"], [1, \"list-group-item\", \"text-muted\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-2\", 3, \"click\"], [1, \"toast-container\", \"position-fixed\", \"top-0\", \"end-0\", \"p-3\"], [1, \"toast\", \"align-items-center\", \"border-0\", \"show\", 3, \"ngClass\"], [1, \"d-flex\"], [1, \"toast-body\"], [\"type\", \"button\", 1, \"btn-close\", \"btn-close-white\", \"me-2\", \"m-auto\", 3, \"click\"]],\n      template: function FeedComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ÉµÉµtemplate(2, FeedComponent_div_2_Template, 6, 1, \"div\", 2);\n          i0.ÉµÉµtemplate(3, FeedComponent_div_3_Template, 2, 1, \"div\", 3);\n          i0.ÉµÉµtemplate(4, FeedComponent_div_4_Template, 15, 4, \"div\", 4);\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµtemplate(5, FeedComponent_div_5_Template, 6, 6, \"div\", 5);\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(2);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.isNewUser);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.isNewUser);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.isNewUser);\n          i0.ÉµÉµadvance(1);\n          i0.ÉµÉµproperty(\"ngIf\", ctx.showToast);\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i5.DatePipe],\n      styles: [\"*[_ngcontent-%COMP%]{\\n    font-family: 'Rubik', sans-serif;\\n}\\n.feed[_ngcontent-%COMP%] {\\n    max-width: 600px;\\n    margin: auto;\\n    margin-top: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvaG9tZS9mZWVkL2ZlZWQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdDQUFnQztBQUNwQztBQUNBO0lBQ0ksZ0JBQWdCO0lBQ2hCLFlBQVk7SUFDWixnQkFBZ0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIqe1xyXG4gICAgZm9udC1mYW1pbHk6ICdSdWJpaycsIHNhbnMtc2VyaWY7XHJcbn1cclxuLmZlZWQge1xyXG4gICAgbWF4LXdpZHRoOiA2MDBweDtcclxuICAgIG1hcmdpbjogYXV0bztcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ÉµÉµelementStart","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµadvance","ÉµÉµtextInterpolate1","ctx_r0","loggedInUsername","ÉµÉµelement","ÉµÉµproperty","post_r5","mediaUrl","ÉµÉµsanitizeUrl","ÉµÉµtemplate","FeedComponent_div_3_ng_container_1_div_14_img_1_Template","FeedComponent_div_3_ng_container_1_div_14_video_2_Template","mediaType","startsWith","ÉµÉµlistener","FeedComponent_div_3_ng_container_1_div_34_div_5_button_10_Template_button_click_0_listener","ÉµÉµrestoreView","_r18","comment_r14","ÉµÉµnextContext","$implicit","ctx_r16","ÉµÉµresetView","deleteComment","FeedComponent_div_3_ng_container_1_div_34_div_5_button_10_Template","profilePictureUrl","ÉµÉµtextInterpolate","username","ÉµÉµpipeBind2","createdAt","ctx_r13","canDeleteComment","content","FeedComponent_div_3_ng_container_1_div_34_Template_textarea_ngModelChange_2_listener","$event","_r22","ctx_r21","newCommentText","postId","FeedComponent_div_3_ng_container_1_div_34_Template_button_click_3_listener","ctx_r24","addComment","FeedComponent_div_3_ng_container_1_div_34_div_5_Template","ctx_r7","commentsMap","ÉµÉµelementContainerStart","FeedComponent_div_3_ng_container_1_div_14_Template","FeedComponent_div_3_ng_container_1_Template_button_click_25_listener","restoredCtx","_r28","ctx_r27","toggleLike","FeedComponent_div_3_ng_container_1_Template_button_click_28_listener","ctx_r29","dislikePost","FeedComponent_div_3_ng_container_1_Template_button_click_31_listener","ctx_r30","toggleComments","FeedComponent_div_3_ng_container_1_div_34_Template","ÉµÉµelementContainerEnd","likeCount","ctx_r4","length","likedByUsers","includes","showCommentsMap","FeedComponent_div_3_ng_container_1_Template","ctx_r1","posts","FeedComponent_div_4_li_6_div_9_ul_5_li_1_Template_button_click_4_listener","_r41","mf_r39","ctx_r40","viewProfile","FeedComponent_div_4_li_6_div_9_ul_5_li_1_Template","ctx_r37","mutualFriendsMap","friend_r35","userId","FeedComponent_div_4_li_6_div_9_Template_small_click_1_listener","_r45","ctx_r43","toggleDropdown","FeedComponent_div_4_li_6_div_9_ul_5_Template","ctx_r36","expanded","FeedComponent_div_4_li_6_Template_button_click_6_listener","_r48","ctx_r47","FeedComponent_div_4_li_6_div_9_Template","ctx_r31","FeedComponent_div_4_li_13_Template_button_click_6_listener","_r51","user_r49","ctx_r50","FeedComponent_div_4_li_13_Template_button_click_9_listener","ctx_r52","sendFriendRequest","FeedComponent_div_4_li_6_Template","FeedComponent_div_4_li_7_Template","FeedComponent_div_4_li_13_Template","FeedComponent_div_4_li_14_Template","ctx_r2","friends","suggestions","FeedComponent_div_5_Template_button_click_5_listener","_r54","ctx_r53","showToast","ÉµÉµpureFunction3","_c0","ctx_r3","toastType","toastMessage","BASE","FeedComponent","constructor","http","userService","cdRef","router","friendsService","isNewUser","ObjectKeys","Object","keys","ngOnInit","getUser","localStorage","getItem","subscribe","next","user","loggedInUserId","loadFeed","loadFriends","loadSuggestions","error","err","console","showToaster","message","type","detectChanges","setTimeout","get","data","map","p","comments","forEach","getFriends","i","findMutualFriend","friend","navigate","getFriendSuggestions","users","receiverId","filter","u","post","payload","delete","Math","max","res","push","responseType","loadComments","c","text","trim","created","comment","commentId","friendId","ÉµÉµdirectiveInject","i1","HttpClient","i2","UserService","ChangeDetectorRef","i3","Router","i4","FriendsService","selectors","decls","vars","consts","template","FeedComponent_Template","rf","ctx","FeedComponent_div_2_Template","FeedComponent_div_3_Template","FeedComponent_div_4_Template","FeedComponent_div_5_Template"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\home\\feed\\feed.component.ts","C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\home\\feed\\feed.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { User, UserService } from '../../profile/user.service';\r\nimport { FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\r\nimport { Router } from '@angular/router';\r\n\r\nconst BASE = 'http://localhost:8765';\r\n\r\ninterface Post {\r\n  postId: number;\r\n  userId: number;\r\n  username: string;\r\n  content: string;\r\n  privacy?: string;\r\n  mediaUrl?: string;\r\n  mediaType?: string;\r\n  profilePictureUrl?: string;\r\n  likeCount: number;\r\n  likedByUsers: string[];\r\n  createdAt?: string;\r\n  comments: Comment[];\r\n}\r\n\r\ninterface Comment {\r\n  commentId: number;\r\n  postId: number;\r\n  userId: number;\r\n  username: string;\r\n  content: string;\r\n  createdAt?: string;\r\n  profilePictureUrl?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-feed',\r\n  templateUrl: './feed.component.html',\r\n  styleUrls: ['./feed.component.css']\r\n})\r\nexport class FeedComponent implements OnInit {\r\n  posts: Post[] = [];\r\n  friends: User[] = [];\r\n  suggestions: User[] = [];\r\n  commentsMap: { [postId: number]: Comment[] } = {};\r\n  showCommentsMap: { [postId: number]: boolean } = {};\r\n  newCommentText: { [postId: number]: string } = {};\r\n\r\n  loggedInUserId!: number;\r\n  loggedInUsername!: string;\r\n  isNewUser: boolean = false;\r\n\r\n  // âœ… Toast state\r\n  toastMessage: string = '';\r\n  toastType: 'success' | 'error' | 'info' = 'info';\r\n  showToast: boolean = false;\r\n\r\n  constructor(private http: HttpClient, private userService: UserService, \r\n    private cdRef: ChangeDetectorRef, private router:Router, private friendsService:FriendsService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userService.getUser(localStorage.getItem('userId')).subscribe({\r\n      next: (user: User) => {\r\n        this.loggedInUserId = user.userId;\r\n        this.loggedInUsername = user.username;\r\n        this.loadFeed();\r\n        this.loadFriends();\r\n        this.loadSuggestions();\r\n      },\r\n      error: (err) => console.error('Failed to load logged-in user', err)\r\n    });\r\n  }\r\n\r\n  private showToaster(message: string, type: 'success' | 'error' | 'info' = 'info') {\r\n    this.toastMessage = message;\r\n    this.toastType = type;\r\n    this.showToast = true;\r\n    this.cdRef.detectChanges();\r\n    setTimeout(() => {\r\n      this.showToast = false;\r\n      this.cdRef.detectChanges();\r\n    }, 3000);\r\n  }\r\n\r\n  // Load posts (friends + own posts)\r\n  loadFeed() {\r\n    this.http.get<Post[]>(`${BASE}/api/posts/feed/${this.loggedInUserId}`).subscribe(data => {\r\n      this.posts = data.map(p => ({\r\n        ...p,\r\n        likedByUsers: p.likedByUsers || [],\r\n        comments: p.comments || []\r\n      }));\r\n      \r\n      this.posts.forEach(p => {\r\n        this.showCommentsMap[p.postId] = false;\r\n        this.commentsMap[p.postId] = p.comments || [];\r\n      });\r\n\r\n      // Check if new user (no friends and no posts)\r\n      this.isNewUser = (this.posts.length === 0 && this.friends.length === 0);\r\n    }, err => console.error('Failed to load posts', err));\r\n  }\r\n\r\n  // Load friends\r\n  loadFriends() {\r\n    this.userService.getFriends(this.loggedInUserId).subscribe({\r\n      next: (friends) => {\r\n        this.friends = friends;\r\n        this.isNewUser = (this.posts.length === 0 && this.friends.length === 0);\r\n         for (let i of this.friends) {\r\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\r\n            next: (data) => {\r\n              this.mutualFriendsMap[i.userId] = data;\r\n            },\r\n            error: (err) => console.error('Error loading mutual friends', err)\r\n          });    \r\n        }\r\n      },\r\n      error: (err) => console.error('Failed to load friends', err)\r\n    });\r\n  }\r\n\r\n  viewProfile(friend: User): void {\r\n      this.showToaster(`ðŸ‘¤ Viewing profile of ${friend.username}`, 'info');\r\n      this.router.navigate(['friends/profile', friend.userId]);\r\n  }\r\n\r\n  // Load friend suggestions\r\n  loadSuggestions() {\r\n    this.userService.getFriendSuggestions(this.loggedInUserId).subscribe({\r\n      next: (users) => { this.suggestions = users; },\r\n      error: (err) => console.error('Failed to load suggestions', err)\r\n    });\r\n  }\r\n\r\n  // Send friend request\r\n  sendFriendRequest(receiverId: number) {\r\n    this.userService.sendFriendRequest(this.loggedInUserId, receiverId).subscribe({\r\n      next: () => {\r\n        this.suggestions = this.suggestions.filter(u => u.userId !== receiverId);\r\n        this.showToaster('âœ… Friend request sent!', 'success');\r\n      },\r\n      error: (err) => {\r\n        console.error('Failed to send friend request', err);\r\n        this.showToaster('âŒ Failed to send friend request', 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Toggle like/unlike\r\n  toggleLike(post: Post) {\r\n    const payload = { postId: post.postId, userId: this.loggedInUserId };\r\n\r\n    if (post.likedByUsers.includes(this.loggedInUsername)) {\r\n      this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`)\r\n        .subscribe(() => {\r\n          post.likeCount = Math.max(0, post.likeCount - 1);\r\n          post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\r\n        }, err => console.error('Failed to unlike', err));\r\n    } else {\r\n      this.http.post<any>(`${BASE}/api/likes`, payload).subscribe({\r\n        next: (res) => {\r\n          post.likeCount = res?.likeCount ?? (post.likeCount + 1);\r\n          if (!post.likedByUsers.includes(this.loggedInUsername)) {\r\n            post.likedByUsers.push(this.loggedInUsername);\r\n          }\r\n        },\r\n        error: (err) => console.error('Failed to like', err)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Dislike = unlike\r\n  dislikePost(post: Post) {\r\n    this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`, { responseType: 'text' })\r\n      .subscribe(() => {\r\n        if (post.likedByUsers.includes(this.loggedInUsername)) {\r\n          post.likeCount = Math.max(0, post.likeCount - 1);\r\n          post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\r\n        }\r\n      }, err => console.error('Dislike failed', err));\r\n  }\r\n\r\n  // Toggle comments\r\n  toggleComments(post: Post) {\r\n    this.showCommentsMap[post.postId] = !this.showCommentsMap[post.postId];\r\n    if (this.showCommentsMap[post.postId]) {\r\n      this.loadComments(post.postId);\r\n    }\r\n  }\r\n\r\n  // Load comments\r\n  loadComments(postId: number) {\r\n    this.http.get<Comment[]>(`${BASE}/api/comments/post/${postId}`)\r\n      .subscribe(data => {\r\n        this.commentsMap[postId] = data.map(c => ({\r\n          ...c,\r\n          username: c.username || `User ${c.userId}`\r\n        }));\r\n      }, err => console.error('Failed to load comments', err));\r\n  }\r\n\r\n  // Add comment\r\n  addComment(post: Post) {\r\n    const text = (this.newCommentText[post.postId] || '').trim();\r\n    if (!text) return;\r\n\r\n    const payload = { postId: post.postId, userId: this.loggedInUserId, content: text };\r\n    this.http.post<Comment>(`${BASE}/api/comments`, payload)\r\n      .subscribe(created => {\r\n        created.username = this.loggedInUsername;\r\n        this.commentsMap[post.postId] = this.commentsMap[post.postId] || [];\r\n        this.commentsMap[post.postId].push(created);\r\n        this.newCommentText[post.postId] = '';\r\n      }, err => console.error('Failed to add comment', err));\r\n  }\r\n\r\n  // Delete comment\r\n  deleteComment(post: Post, comment: Comment) {\r\n    this.http.delete(`${BASE}/api/comments/${comment.commentId}?userId=${this.loggedInUserId}`)\r\n      .subscribe(() => {\r\n        this.commentsMap[post.postId] =\r\n          this.commentsMap[post.postId].filter(c => c.commentId !== comment.commentId);\r\n        this.showToaster('ðŸ—‘ï¸ Comment deleted', 'info');\r\n      }, err => console.error('Failed to delete comment', err));\r\n  }\r\n\r\n  canDeleteComment(post: Post, comment: Comment) {\r\n    return comment.userId === this.loggedInUserId || post.userId === this.loggedInUserId;\r\n  }\r\n\r\n  \r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n  mutualFriendsMap: { [userId: number]: User[] } = {};\r\n  ObjectKeys = Object.keys;\r\n  toggleDropdown(friendId: number): void {\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n  }\r\n}","<div class=\"container my-4\">\r\n  <div class=\"row\">\r\n    <!-- If new user (no posts + no friends) -->\r\n    <div class=\"col-md-12\" *ngIf=\"isNewUser\">\r\n      <div class=\"card text-center shadow-sm p-4\">\r\n        <h4>Welcome, {{ loggedInUsername }} ðŸŽ‰</h4>\r\n        <p class=\"text-muted\">You donâ€™t have any posts or friends yet. Start by finding people you may know!</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Feed (posts) -->\r\n    <div class=\"col-md-8\" *ngIf=\"!isNewUser\">\r\n      <ng-container *ngFor=\"let post of posts\">\r\n        <div class=\"card shadow-sm rounded-3 mb-4\">\r\n          <div class=\"card-body\">\r\n            <!-- Post Header -->\r\n            <div class=\"d-flex align-items-center mb-2\">\r\n              <img [src]=\"post.profilePictureUrl || 'assets/images/default-avatar.png'\"\r\n                   class=\"rounded-circle me-2\" style=\"width: 3rem; height: 3rem;\">\r\n              <div>\r\n                <h6 class=\"mb-0\"><strong>{{ post.username }}</strong></h6>\r\n                <small class=\"text-muted\">{{ post.createdAt | date:'dd MMM yyyy, hh:mm a' }}</small>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Post content -->\r\n            <p>{{ post.content }}</p>\r\n\r\n            <!-- Post Media -->\r\n            <div *ngIf=\"post.mediaUrl\" class=\"mb-3\">\r\n              <img *ngIf=\"post.mediaType?.startsWith('image')\" [src]=\"post.mediaUrl\"\r\n                   class=\"img-fluid rounded shadow-sm\">\r\n              <video *ngIf=\"post.mediaType?.startsWith('video')\" [src]=\"post.mediaUrl\"\r\n                     class=\"w-100 rounded shadow-sm\" controls></video>\r\n            </div>\r\n\r\n            <!-- Reaction summary -->\r\n            <div class=\"d-flex justify-content-between align-items-center mt-2\">\r\n              <div>\r\n                <i class=\"bi bi-hand-thumbs-up-fill text-primary me-1\"></i>\r\n                <span class=\"small\">{{ post.likeCount || 0 }}</span>\r\n              </div>\r\n              <div>\r\n                <span class=\"small text-muted\">{{ commentsMap[post.postId].length || 0 }} comments</span>\r\n              </div>\r\n            </div>\r\n\r\n            <hr>\r\n\r\n            <!-- Action buttons -->\r\n            <div class=\"d-flex justify-content-around text-muted\">\r\n              <button class=\"btn btn-light btn-sm w-100 me-1\" (click)=\"toggleLike(post)\">\r\n                <i class=\"bi\"\r\n                   [ngClass]=\"post.likedByUsers.includes(loggedInUsername)\r\n                                ? 'bi-hand-thumbs-up-fill text-primary'\r\n                                : 'bi-hand-thumbs-up'\"></i>\r\n                {{ post.likedByUsers.includes(loggedInUsername) ? 'Liked' : 'Like' }}\r\n              </button>\r\n\r\n              <button class=\"btn btn-light btn-sm w-100 me-1\" (click)=\"dislikePost(post)\">\r\n                <i class=\"bi bi-hand-thumbs-down\"></i> Dislike\r\n              </button>\r\n\r\n              <button class=\"btn btn-light btn-sm w-100\" (click)=\"toggleComments(post)\">\r\n                <i class=\"bi bi-chat-dots\"></i> Comments\r\n              </button>\r\n            </div>\r\n\r\n            <!-- Comments section -->\r\n            <div *ngIf=\"showCommentsMap[post.postId]\" class=\"mt-3\">\r\n              <!-- Add comment -->\r\n              <div class=\"input-group mb-3\">\r\n                <textarea class=\"form-control me-2\"\r\n                          [(ngModel)]=\"newCommentText[post.postId]\"\r\n                          rows=\"1\"\r\n                          placeholder=\"Write a comment...\"></textarea>\r\n                <button class=\"btn btn-primary\" (click)=\"addComment(post)\">\r\n                  <i class=\"bi bi-send\"></i>\r\n                </button>\r\n              </div>\r\n\r\n              <!-- Existing comments -->\r\n              <div *ngFor=\"let comment of commentsMap[post.postId]\" class=\"d-flex align-items-start mb-2\">\r\n                <img [src]=\"comment.profilePictureUrl || 'assets/images/default-avatar.png'\"\r\n                     class=\"rounded-circle me-2\" style=\"width:30px; height:30px;\">\r\n                <div class=\"bg-light rounded p-2 w-100\">\r\n                  <div class=\"d-flex justify-content-between\">\r\n                    <strong>{{ comment.username }}</strong>\r\n                    <div>\r\n                      <small class=\"text-muted\">{{ comment.createdAt | date:'dd MMM yyyy, hh:mm a' }}</small>\r\n                      <button *ngIf=\"canDeleteComment(post, comment)\"\r\n                              class=\"btn btn-sm btn-link text-danger\"\r\n                              (click)=\"deleteComment(post, comment)\">\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div>{{ comment.content }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n    </div>\r\n\r\n    <!-- Right sidebar -->\r\n    <div class=\"col-md-4\" *ngIf=\"!isNewUser\">\r\n      <!-- Friends List -->\r\n      <div class=\"card mb-3 shadow-sm\">\r\n        <div class=\"card-header bg-primary text-white\"><strong>Your Friends</strong></div>\r\n        <ul class=\"list-group list-group-flush\">\r\n          <li *ngFor=\"let friend of friends\" class=\"list-group-item d-flex align-items-center justify-content-between\">\r\n            <div class=\"d-flex align-items-center\">\r\n              <img [src]=\"friend.profilePictureUrl || 'assets/images/default-avatar.png'\"\r\n              class=\"rounded-circle me-2\" style=\"width:30px; height:30px;\">\r\n              <span>{{ friend.username }}</span>\r\n            </div>\r\n            <span>\r\n\r\n              <button class=\"btn btn-sm btn-outline-primary\" (click)=\"viewProfile(friend)\">\r\n                <i class=\"bi bi-person\"></i> View\r\n              </button>\r\n            </span>\r\n            <!-- Mutual Friends Section -->\r\n      <div\r\n        class=\"card-footer bg-light border-0\"\r\n        *ngIf=\"mutualFriendsMap[friend.userId] && mutualFriendsMap[friend.userId].length > 0\"\r\n      >\r\n        <small\r\n          class=\"text-primary fw-semibold cursor-pointer\"\r\n          (click)=\"toggleDropdown(friend.userId)\"\r\n        >\r\n          {{ expanded[friend.userId] ? 'Hide Mutual Friends ðŸ”¼' : 'Show Mutual Friends ðŸ”½' }}\r\n          <span class=\"badge bg-secondary ms-1\">\r\n            {{ mutualFriendsMap[friend.userId].length }}\r\n          </span>\r\n        </small>\r\n\r\n        <!-- Expanded Mutual Friends List -->\r\n        <ul *ngIf=\"expanded[friend.userId]\" class=\"list-group list-group-flush mt-3\">\r\n          <li *ngFor=\"let mf of mutualFriendsMap[friend.userId]\" class=\"list-group-item d-flex align-items-center\">\r\n            <img\r\n              [src]=\"mf.profilePictureUrl || 'assets/default-avatar.png'\"\r\n              class=\"rounded-circle border me-3\"\r\n              width=\"40\"\r\n              height=\"40\"\r\n            />\r\n            <span class=\"fw-semibold\">{{ mf.username }}</span>\r\n            <button\r\n              class=\"btn btn-sm btn-outline-secondary ms-auto\"\r\n              (click)=\"viewProfile(mf)\"\r\n            >\r\n              View Profile\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n          </li>\r\n          <li *ngIf=\"friends.length === 0\" class=\"list-group-item text-muted\">No friends yet</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Suggestions -->\r\n      <div class=\"card shadow-sm\">\r\n        <div class=\"card-header bg-success text-white\"><strong>People You May Know</strong></div>\r\n        <ul class=\"list-group list-group-flush\">\r\n          <li *ngFor=\"let user of suggestions\" class=\"list-group-item d-flex align-items-center justify-content-between\">\r\n            <div class=\"d-flex align-items-center\">\r\n              <img [src]=\"user.profilePictureUrl || 'assets/images/default-avatar.png'\"\r\n                   class=\"rounded-circle me-2\" style=\"width:30px; height:30px;\">\r\n              <span>{{ user.username }}</span>\r\n            </div>\r\n            <span>\r\n\r\n              <button class=\"btn btn-sm btn-outline-primary me-2\" (click)=\"viewProfile(user)\">\r\n                <i class=\"bi bi-person\"></i> View\r\n              </button>\r\n              <button class=\"btn btn-sm btn-outline-primary\"\r\n              (click)=\"sendFriendRequest(user.userId)\">\r\n              Add Friend\r\n            </button>\r\n          </span>\r\n          </li>\r\n          <li *ngIf=\"suggestions.length === 0\" class=\"list-group-item text-muted\">No suggestions</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<!-- âœ… Toast -->\r\n<div class=\"toast-container position-fixed top-0 end-0 p-3\" *ngIf=\"showToast\">\r\n  <div class=\"toast align-items-center border-0 show\"\r\n       [ngClass]=\"{\r\n         'text-bg-success': toastType === 'success',\r\n         'text-bg-danger': toastType === 'error',\r\n         'text-bg-info': toastType === 'info'\r\n       }\">\r\n    <div class=\"d-flex\">\r\n      <div class=\"toast-body\">{{ toastMessage }}</div>\r\n      <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\"\r\n              (click)=\"showToast = false\"></button>\r\n    </div>\r\n  </div>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}