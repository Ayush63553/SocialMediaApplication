{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FindFriendsComponent = class FindFriendsComponent {\n  constructor(friendsService) {\n    this.friendsService = friendsService;\n    this.allFriends = [];\n    this.filteredFriends = [];\n    this.searchText = '';\n    this.expanded = {};\n    this.mutualFriendsMap = {}; // store loaded lists\n  }\n\n  ngOnInit() {\n    this.loadFriends();\n  }\n  loadFriends() {\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\n      next: data => {\n        this.filteredFriends = data;\n      },\n      error: err => console.error('Error loading friends', err)\n    });\n  }\n  onSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.filteredFriends = this.allFriends.filter(friend => friend.username.toLowerCase().includes(text));\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n    if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n      this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), friendId).subscribe({\n        next: data => this.mutualFriendsMap[friendId] = data,\n        error: err => console.error('Error loading mutual friends', err)\n      });\n    }\n  }\n  sendRequest(friend) {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'), friend.userId).subscribe({\n      next: () => {\n        alert(`Friend request sent to ${friend.username}`);\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\n      },\n      error: err => {\n        alert('Failed to send request');\n        console.error(err);\n      }\n    });\n  }\n};\nFindFriendsComponent = __decorate([Component({\n  selector: 'app-find-friends',\n  templateUrl: './find-friends.component.html',\n  styleUrls: ['./find-friends.component.css']\n})], FindFriendsComponent);","map":{"version":3,"names":["Component","FindFriendsComponent","constructor","friendsService","allFriends","filteredFriends","searchText","expanded","mutualFriendsMap","ngOnInit","loadFriends","findFriends","localStorage","getItem","subscribe","next","data","error","err","console","onSearchChange","text","toLowerCase","filter","friend","username","includes","toggleDropdown","friendId","findMutualFriend","sendRequest","sendFriendRequest","userId","alert","f","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\find-friends\\find-friends.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Friend, FriendsService } from 'src/app/core/services/Friends/friends.service';\r\nimport { AuthService } from 'src/app/core/services/Login/authLogin.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-find-friends',\r\n  templateUrl: './find-friends.component.html',\r\n  styleUrls: ['./find-friends.component.css']\r\n})\r\nexport class FindFriendsComponent implements OnInit {\r\n\r\n  allFriends: Friend[] = [];\r\n\r\n  filteredFriends: Friend[] = [];\r\n\r\n  searchText: string = '';\r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n\r\n  mutualFriendsMap: { [userId: number]: Friend[] } = {}; // store loaded lists\r\n\r\n  constructor(private friendsService: FriendsService) {}\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.loadFriends();\r\n\r\n  }\r\n\r\n  loadFriends(): void {\r\n\r\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\r\n\r\n      next: (data) => {\r\n\r\n\r\n        this.filteredFriends = data;\r\n\r\n      },\r\n\r\n      error: (err) => console.error('Error loading friends', err)\r\n\r\n    });\r\n\r\n  }\r\n\r\n  onSearchChange(): void {\r\n\r\n    const text = this.searchText.toLowerCase();\r\n\r\n    this.filteredFriends = this.allFriends.filter(friend =>\r\n\r\n      friend.username.toLowerCase().includes(text)\r\n\r\n    );\r\n\r\n  }\r\n\r\n  toggleDropdown(friendId: number): void {\r\n\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n\r\n    if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\r\n\r\n      this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\r\n\r\n        next: (data) => (this.mutualFriendsMap[friendId] =data),\r\n\r\n        error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n      });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  sendRequest(friend: Friend): void {\r\n\r\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'),friend.userId).subscribe({\r\n\r\n      next: () => {\r\n\r\n        alert(`Friend request sent to ${friend.username}`);\r\n\r\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\r\n\r\n      },\r\n\r\n      error: (err) => {\r\n\r\n        alert('Failed to send request');\r\n\r\n        console.error(err);\r\n\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,WAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EAY/BC,YAAoBC,cAA8B;IAA9B,KAAAA,cAAc,GAAdA,cAAc;IAVlC,KAAAC,UAAU,GAAa,EAAE;IAEzB,KAAAC,eAAe,GAAa,EAAE;IAE9B,KAAAC,UAAU,GAAW,EAAE;IAEvB,KAAAC,QAAQ,GAAkC,EAAE;IAE5C,KAAAC,gBAAgB,GAAmC,EAAE,CAAC,CAAC;EAEF;;EAErDC,QAAQA,CAAA;IAEN,IAAI,CAACC,WAAW,EAAE;EAEpB;EAEAA,WAAWA,CAAA;IAET,IAAI,CAACP,cAAc,CAACQ,WAAW,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAACC,SAAS,CAAC;MAExEC,IAAI,EAAGC,IAAI,IAAI;QAGb,IAAI,CAACX,eAAe,GAAGW,IAAI;MAE7B,CAAC;MAEDC,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,uBAAuB,EAAEC,GAAG;KAE3D,CAAC;EAEJ;EAEAE,cAAcA,CAAA;IAEZ,MAAMC,IAAI,GAAG,IAAI,CAACf,UAAU,CAACgB,WAAW,EAAE;IAE1C,IAAI,CAACjB,eAAe,GAAG,IAAI,CAACD,UAAU,CAACmB,MAAM,CAACC,MAAM,IAElDA,MAAM,CAACC,QAAQ,CAACH,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC,CAE7C;EAEH;EAEAM,cAAcA,CAACC,QAAgB;IAE7B,IAAI,CAACrB,QAAQ,CAACqB,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACrB,QAAQ,CAACqB,QAAQ,CAAC;IAElD,IAAI,IAAI,CAACrB,QAAQ,CAACqB,QAAQ,CAAC,IAAI,CAAC,IAAI,CAACpB,gBAAgB,CAACoB,QAAQ,CAAC,EAAE;MAE/D,IAAI,CAACzB,cAAc,CAAC0B,gBAAgB,CAACjB,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACe,QAAQ,CAAC,CAACd,SAAS,CAAC;QAEtFC,IAAI,EAAGC,IAAI,IAAM,IAAI,CAACR,gBAAgB,CAACoB,QAAQ,CAAC,GAAEZ,IAAK;QAEvDC,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,8BAA8B,EAAEC,GAAG;OAElE,CAAC;;EAIN;EAEAY,WAAWA,CAACN,MAAc;IAExB,IAAI,CAACrB,cAAc,CAAC4B,iBAAiB,CAACnB,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACW,MAAM,CAACQ,MAAM,CAAC,CAAClB,SAAS,CAAC;MAE5FC,IAAI,EAAEA,CAAA,KAAK;QAETkB,KAAK,CAAC,0BAA0BT,MAAM,CAACC,QAAQ,EAAE,CAAC;QAElD,IAAI,CAACpB,eAAe,GAAG,IAAI,CAACA,eAAe,CAACkB,MAAM,CAACW,CAAC,IAAIA,CAAC,CAACF,MAAM,KAAKR,MAAM,CAACQ,MAAM,CAAC;MAErF,CAAC;MAEDf,KAAK,EAAGC,GAAG,IAAI;QAEbe,KAAK,CAAC,wBAAwB,CAAC;QAE/Bd,OAAO,CAACF,KAAK,CAACC,GAAG,CAAC;MAEpB;KAED,CAAC;EAEJ;CAED;AA3FYjB,oBAAoB,GAAAkC,UAAA,EALhCnC,SAAS,CAAC;EACToC,QAAQ,EAAE,kBAAkB;EAC5BC,WAAW,EAAE,+BAA+B;EAC5CC,SAAS,EAAE,CAAC,8BAA8B;CAC3C,CAAC,C,EACWrC,oBAAoB,CA2FhC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}