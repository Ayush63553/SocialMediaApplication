{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FindFriendsComponent = class FindFriendsComponent {\n  constructor(friendsService, router) {\n    this.friendsService = friendsService;\n    this.router = router;\n    this.allFriends = [];\n    this.filteredFriends = [];\n    this.searchText = '';\n    this.expanded = {};\n    this.mutualFriendsMap = {}; // store loaded lists\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.loadFriends();\n  }\n  viewProfile(friend) {\n    alert(`Viewing profile of ${friend.username}`);\n    this.router.navigate(['friends/profile', friend.userId]);\n  }\n  loadFriends() {\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\n      next: data => {\n        this.filteredFriends = data;\n        this.allFriends = data;\n        for (let i of this.filteredFriends) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Error loading friends', err)\n    });\n  }\n  onSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.filteredFriends = this.allFriends.filter(friend => friend.username.toLowerCase().includes(text));\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\n    //     error: (err) => console.error('Error loading mutual friends', err)\n    //   });\n    // }\n  }\n\n  sendRequest(friend) {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'), friend.userId).subscribe({\n      next: () => {\n        alert(`Friend request sent to ${friend.username}`);\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\n      },\n      error: err => {\n        alert('Failed to send request');\n        console.error(err);\n      }\n    });\n  }\n};\nFindFriendsComponent = __decorate([Component({\n  selector: 'app-find-friends',\n  templateUrl: './find-friends.component.html',\n  styleUrls: ['./find-friends.component.css']\n})], FindFriendsComponent);","map":{"version":3,"names":["Component","FindFriendsComponent","constructor","friendsService","router","allFriends","filteredFriends","searchText","expanded","mutualFriendsMap","ObjectKeys","Object","keys","ngOnInit","loadFriends","viewProfile","friend","alert","username","navigate","userId","findFriends","localStorage","getItem","subscribe","next","data","i","findMutualFriend","error","err","console","onSearchChange","text","toLowerCase","filter","includes","toggleDropdown","friendId","sendRequest","sendFriendRequest","f","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\find-friends\\find-friends.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\r\nimport { AuthService } from 'src/app/core/services/Login/authLogin.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-find-friends',\r\n  templateUrl: './find-friends.component.html',\r\n  styleUrls: ['./find-friends.component.css']\r\n})\r\nexport class FindFriendsComponent implements OnInit {\r\n\r\n  allFriends: UserDTO[] = [];\r\n\r\n  filteredFriends:UserDTO[] = [];\r\n\r\n  searchText: string = '';\r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n\r\n  mutualFriendsMap: { [userId: number]: UserDTO[] } = {}; // store loaded lists\r\n\r\n  constructor(private friendsService: FriendsService, private router:Router) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadFriends();\r\n  }\r\n\r\n  viewProfile(friend:UserDTO):void{\r\n    alert(`Viewing profile of ${friend.username}`)\r\n    this.router.navigate(['friends/profile',friend.userId])\r\n  }\r\n  loadFriends(): void {\r\n\r\n    this.friendsService.findFriends(localStorage.getItem(\"userId\")).subscribe({\r\n\r\n      next: (data) => {\r\n\r\n\r\n        this.filteredFriends = data;  \r\n        this.allFriends=data; \r\n        for(let i of this.filteredFriends){\r\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),i.userId).subscribe({\r\n  \r\n          next: (data) => {\r\n            this.mutualFriendsMap[i.userId] =data;\r\n          },\r\n          error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n          });    \r\n        }\r\n      },\r\n\r\n      error: (err) => console.error('Error loading friends', err)\r\n\r\n    });\r\n\r\n  }\r\n\r\n  onSearchChange(): void {\r\n\r\n    const text = this.searchText.toLowerCase();\r\n\r\n    this.filteredFriends = this.allFriends.filter(friend =>\r\n\r\n      friend.username.toLowerCase().includes(text)\r\n\r\n    );\r\n\r\n  }\r\n\r\n  toggleDropdown(friendId: number): void {\r\n\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n\r\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\r\n\r\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\r\n\r\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\r\n\r\n    //     error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n    //   });\r\n\r\n    // }\r\n\r\n  }\r\n\r\n  sendRequest(friend: UserDTO): void {\r\n\r\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'),friend.userId).subscribe({\r\n\r\n      next: () => {\r\n\r\n        alert(`Friend request sent to ${friend.username}`);\r\n\r\n        this.filteredFriends = this.filteredFriends.filter(f => f.userId !== friend.userId);\r\n\r\n      },\r\n\r\n      error: (err) => {\r\n\r\n        alert('Failed to send request');\r\n\r\n        console.error(err);\r\n\r\n      }\r\n\r\n    });\r\n    \r\n  }\r\n  \r\n  ObjectKeys=Object.keys;\r\n\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAW1C,WAAMC,oBAAoB,GAA1B,MAAMA,oBAAoB;EAY/BC,YAAoBC,cAA8B,EAAUC,MAAa;IAArD,KAAAD,cAAc,GAAdA,cAAc;IAA0B,KAAAC,MAAM,GAANA,MAAM;IAVlE,KAAAC,UAAU,GAAc,EAAE;IAE1B,KAAAC,eAAe,GAAa,EAAE;IAE9B,KAAAC,UAAU,GAAW,EAAE;IAEvB,KAAAC,QAAQ,GAAkC,EAAE;IAE5C,KAAAC,gBAAgB,GAAoC,EAAE,CAAC,CAAC;IA6FxD,KAAAC,UAAU,GAACC,MAAM,CAACC,IAAI;EA3FsD;EAE5EC,QAAQA,CAAA;IACN,IAAI,CAACC,WAAW,EAAE;EACpB;EAEAC,WAAWA,CAACC,MAAc;IACxBC,KAAK,CAAC,sBAAsBD,MAAM,CAACE,QAAQ,EAAE,CAAC;IAC9C,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,iBAAiB,EAACH,MAAM,CAACI,MAAM,CAAC,CAAC;EACzD;EACAN,WAAWA,CAAA;IAET,IAAI,CAACX,cAAc,CAACkB,WAAW,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAACC,SAAS,CAAC;MAExEC,IAAI,EAAGC,IAAI,IAAI;QAGb,IAAI,CAACpB,eAAe,GAAGoB,IAAI;QAC3B,IAAI,CAACrB,UAAU,GAACqB,IAAI;QACpB,KAAI,IAAIC,CAAC,IAAI,IAAI,CAACrB,eAAe,EAAC;UAChC,IAAI,CAACH,cAAc,CAACyB,gBAAgB,CAACN,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACI,CAAC,CAACP,MAAM,CAAC,CAACI,SAAS,CAAC;YAExFC,IAAI,EAAGC,IAAI,IAAI;cACb,IAAI,CAACjB,gBAAgB,CAACkB,CAAC,CAACP,MAAM,CAAC,GAAEM,IAAI;YACvC,CAAC;YACDG,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,8BAA8B,EAAEC,GAAG;WAEhE,CAAC;;MAEN,CAAC;MAEDD,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,uBAAuB,EAAEC,GAAG;KAE3D,CAAC;EAEJ;EAEAE,cAAcA,CAAA;IAEZ,MAAMC,IAAI,GAAG,IAAI,CAAC1B,UAAU,CAAC2B,WAAW,EAAE;IAE1C,IAAI,CAAC5B,eAAe,GAAG,IAAI,CAACD,UAAU,CAAC8B,MAAM,CAACnB,MAAM,IAElDA,MAAM,CAACE,QAAQ,CAACgB,WAAW,EAAE,CAACE,QAAQ,CAACH,IAAI,CAAC,CAE7C;EAEH;EAEAI,cAAcA,CAACC,QAAgB;IAE7B,IAAI,CAAC9B,QAAQ,CAAC8B,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC9B,QAAQ,CAAC8B,QAAQ,CAAC;IAElD;IAEA;IAEA;IAEA;IAEA;IAEA;EAEF;;EAEAC,WAAWA,CAACvB,MAAe;IAEzB,IAAI,CAACb,cAAc,CAACqC,iBAAiB,CAAClB,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACP,MAAM,CAACI,MAAM,CAAC,CAACI,SAAS,CAAC;MAE5FC,IAAI,EAAEA,CAAA,KAAK;QAETR,KAAK,CAAC,0BAA0BD,MAAM,CAACE,QAAQ,EAAE,CAAC;QAElD,IAAI,CAACZ,eAAe,GAAG,IAAI,CAACA,eAAe,CAAC6B,MAAM,CAACM,CAAC,IAAIA,CAAC,CAACrB,MAAM,KAAKJ,MAAM,CAACI,MAAM,CAAC;MAErF,CAAC;MAEDS,KAAK,EAAGC,GAAG,IAAI;QAEbb,KAAK,CAAC,wBAAwB,CAAC;QAE/Bc,OAAO,CAACF,KAAK,CAACC,GAAG,CAAC;MAEpB;KAED,CAAC;EAEJ;CAID;AAzGY7B,oBAAoB,GAAAyC,UAAA,EALhC1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,kBAAkB;EAC5BC,WAAW,EAAE,+BAA+B;EAC5CC,SAAS,EAAE,CAAC,8BAA8B;CAC3C,CAAC,C,EACW5C,oBAAoB,CAyGhC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}