{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FriendRequestSentComponent = class FriendRequestSentComponent {\n  constructor(friendsService, cdr) {\n    this.friendsService = friendsService;\n    this.cdr = cdr;\n    this.sentRequests = [];\n    this.expanded = {};\n    this.mutualFriendsMap = {};\n    this.ObjectKeys = Object.keys;\n    this.searchText = \"\";\n    this.filteredRequests = [];\n  }\n  ngOnInit() {\n    this.loadRequests();\n  }\n  loadRequests() {\n    this.friendsService.getFriendRequestsSent(localStorage.getItem('userId')).subscribe({\n      next: data => {\n        this.sentRequests = data;\n        this.filteredRequests = data;\n        for (let i of this.sentRequests) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.receiver.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.receiver.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Error loading sent requests', err)\n    });\n  }\n  cancel(id) {\n    this.friendsService.cancelFriendRequest(localStorage.getItem('userId'), id).subscribe({\n      next: data => {\n        alert(data);\n        this.loadRequests();\n      },\n      error: err => {\n        alert(\"Cancel Request Failed\");\n        console.log(err);\n      }\n    });\n  }\n  onSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.sentRequests = this.filteredRequests.filter(request => request.receiver.username.toLowerCase().includes(text));\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\n    //     error: (err) => console.error('Error loading mutual friends', err)\n    //   });\n    // }\n  }\n};\n\nFriendRequestSentComponent = __decorate([Component({\n  selector: 'app-friend-request-sent',\n  templateUrl: './friend-request-sent.component.html',\n  styleUrls: ['./friend-request-sent.component.css']\n})], FriendRequestSentComponent);","map":{"version":3,"names":["Component","FriendRequestSentComponent","constructor","friendsService","cdr","sentRequests","expanded","mutualFriendsMap","ObjectKeys","Object","keys","searchText","filteredRequests","ngOnInit","loadRequests","getFriendRequestsSent","localStorage","getItem","subscribe","next","data","i","findMutualFriend","receiver","userId","error","err","console","cancel","id","cancelFriendRequest","alert","log","onSearchChange","text","toLowerCase","filter","request","username","includes","toggleDropdown","friendId","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\friend-request-sent\\friend-request-sent.component.ts"],"sourcesContent":["import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { FriendsService, Request, UserDTO } from 'src/app/core/services/Friends/friends.service';\n\n@Component({\n  selector: 'app-friend-request-sent',\n  templateUrl: './friend-request-sent.component.html',\n  styleUrls: ['./friend-request-sent.component.css']\n})\n\nexport class FriendRequestSentComponent implements OnInit {\n\n  sentRequests: Request[] = [];\n  expanded: { [userId: number]: boolean } = {};\n\n  mutualFriendsMap: { [userId: number]: UserDTO[] } = {};\n  \n  ObjectKeys=Object.keys;\n\n  constructor(private friendsService: FriendsService,private cdr:ChangeDetectorRef) {}\n\n  ngOnInit(): void {\n    this.loadRequests();\n  }\n\n  loadRequests(): void {\n\n    this.friendsService.getFriendRequestsSent(localStorage.getItem('userId')).subscribe({\n\n      next: data => {\n        this.sentRequests= data;\n        this.filteredRequests=data;\n        for(let i of this.sentRequests){\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),i.receiver.userId).subscribe({\n  \n          next: (data) => {\n            this.mutualFriendsMap[i.receiver.userId] =data;\n          },\n          error: (err) => console.error('Error loading mutual friends', err)\n\n          });    \n        }\n      },\n\n      error: err => console.error('Error loading sent requests', err)\n\n    });\n\n  }\n\n  cancel(id: number): void {\n\n    this.friendsService.cancelFriendRequest(localStorage.getItem('userId'),id).subscribe({\n      next:data=>{\n        alert(data);\n        this.loadRequests();\n      },\n        error:err=>{alert(\"Cancel Request Failed\");\n        console.log(err);\n      }\n    });\n\n  }\n\n  searchText:string=\"\";\n\n  filteredRequests:Request[]=[];\n  onSearchChange(): void {\n\n    const text = this.searchText.toLowerCase();\n\n    this.sentRequests = this.filteredRequests.filter(request =>\n      request.receiver.username.toLowerCase().includes(text)\n    );\n\n  }\n\n\n  toggleDropdown(friendId: number): void {\n\n    this.expanded[friendId] = !this.expanded[friendId];\n\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\n\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\n\n    //     error: (err) => console.error('Error loading mutual friends', err)\n\n    //   });\n\n    // }\n\n  }\n\n}"],"mappings":";AAAA,SAA4BA,SAAS,QAAgB,eAAe;AAS7D,WAAMC,0BAA0B,GAAhC,MAAMA,0BAA0B;EASrCC,YAAoBC,cAA8B,EAASC,GAAqB;IAA5D,KAAAD,cAAc,GAAdA,cAAc;IAAyB,KAAAC,GAAG,GAAHA,GAAG;IAP9D,KAAAC,YAAY,GAAc,EAAE;IAC5B,KAAAC,QAAQ,GAAkC,EAAE;IAE5C,KAAAC,gBAAgB,GAAoC,EAAE;IAEtD,KAAAC,UAAU,GAACC,MAAM,CAACC,IAAI;IA+CtB,KAAAC,UAAU,GAAQ,EAAE;IAEpB,KAAAC,gBAAgB,GAAW,EAAE;EA/CsD;EAEnFC,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAA,YAAYA,CAAA;IAEV,IAAI,CAACX,cAAc,CAACY,qBAAqB,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAACC,SAAS,CAAC;MAElFC,IAAI,EAAEC,IAAI,IAAG;QACX,IAAI,CAACf,YAAY,GAAEe,IAAI;QACvB,IAAI,CAACR,gBAAgB,GAACQ,IAAI;QAC1B,KAAI,IAAIC,CAAC,IAAI,IAAI,CAAChB,YAAY,EAAC;UAC7B,IAAI,CAACF,cAAc,CAACmB,gBAAgB,CAACN,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACI,CAAC,CAACE,QAAQ,CAACC,MAAM,CAAC,CAACN,SAAS,CAAC;YAEjGC,IAAI,EAAGC,IAAI,IAAI;cACb,IAAI,CAACb,gBAAgB,CAACc,CAAC,CAACE,QAAQ,CAACC,MAAM,CAAC,GAAEJ,IAAI;YAChD,CAAC;YACDK,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,8BAA8B,EAAEC,GAAG;WAEhE,CAAC;;MAEN,CAAC;MAEDD,KAAK,EAAEC,GAAG,IAAIC,OAAO,CAACF,KAAK,CAAC,6BAA6B,EAAEC,GAAG;KAE/D,CAAC;EAEJ;EAEAE,MAAMA,CAACC,EAAU;IAEf,IAAI,CAAC1B,cAAc,CAAC2B,mBAAmB,CAACd,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,EAACY,EAAE,CAAC,CAACX,SAAS,CAAC;MACnFC,IAAI,EAACC,IAAI,IAAE;QACTW,KAAK,CAACX,IAAI,CAAC;QACX,IAAI,CAACN,YAAY,EAAE;MACrB,CAAC;MACCW,KAAK,EAACC,GAAG,IAAE;QAACK,KAAK,CAAC,uBAAuB,CAAC;QAC1CJ,OAAO,CAACK,GAAG,CAACN,GAAG,CAAC;MAClB;KACD,CAAC;EAEJ;EAKAO,cAAcA,CAAA;IAEZ,MAAMC,IAAI,GAAG,IAAI,CAACvB,UAAU,CAACwB,WAAW,EAAE;IAE1C,IAAI,CAAC9B,YAAY,GAAG,IAAI,CAACO,gBAAgB,CAACwB,MAAM,CAACC,OAAO,IACtDA,OAAO,CAACd,QAAQ,CAACe,QAAQ,CAACH,WAAW,EAAE,CAACI,QAAQ,CAACL,IAAI,CAAC,CACvD;EAEH;EAGAM,cAAcA,CAACC,QAAgB;IAE7B,IAAI,CAACnC,QAAQ,CAACmC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACnC,QAAQ,CAACmC,QAAQ,CAAC;IAElD;IAEA;IAEA;IAEA;IAEA;IAEA;EAEF;CAED;;AAtFYxC,0BAA0B,GAAAyC,UAAA,EANtC1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,yBAAyB;EACnCC,WAAW,EAAE,sCAAsC;EACnDC,SAAS,EAAE,CAAC,qCAAqC;CAClD,CAAC,C,EAEW5C,0BAA0B,CAsFtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}