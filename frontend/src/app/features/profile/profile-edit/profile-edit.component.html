<div class="profile-edit-card">
  <!-- Profile Picture -->
  <div class="profile-pic-container">
    <img [src]="avatar" alt="Profile Picture" class="profile-pic" />
    <div class="pic-actions">
      <label for="uploadPic" class="btn-upload">Change</label>
      <input type="file" id="uploadPic" (change)="onFileSelected($event)" hidden />
      <button class="btn-remove" (click)="removePicture()">Remove</button>
    </div>
  </div>

  <!-- Username -->
  <div class="edit-field">
    <label>Username</label>
    <div class="field-display" *ngIf="!editMode.username">
      <span>{{ username }}</span>
      <button class="icon-btn" (click)="toggleEdit('username')">✎</button>
    </div>
    <input *ngIf="editMode.username" type="text" [(ngModel)]="username" name="username"
      (blur)="toggleEdit('username')" />
  </div>

  <!-- Date of Birth -->
  <div class="edit-field">
    <label>Date of Birth</label>
    <div class="field-display" *ngIf="!editMode.dateOfBirth">
      <span>{{ dateOfBirth }}</span>
      <button class="icon-btn" (click)="toggleEdit('dateOfBirth')">✎</button>
    </div>
    <input *ngIf="editMode.dateOfBirth" type="date" [(ngModel)]="dateOfBirth" name="dateOfBirth"
      (blur)="toggleEdit('dateOfBirth')" />
  </div>

  <!-- Bio -->
  <div class="edit-field">
    <label>Bio</label>
    <div class="field-display" *ngIf="!editMode.bio">
      <span>{{ bio }}</span>
      <button class="icon-btn" (click)="toggleEdit('bio')">✎</button>
    </div>
    <textarea *ngIf="editMode.bio" [(ngModel)]="bio" name="bio" rows="3"
      (blur)="toggleEdit('bio')"></textarea>
  </div>

  <!-- Actions -->
  <div class="actions">
    <button class="btn-save" (click)="saveProfile()">Save</button>
    <a routerLink="/profile" class="btn-cancel">Cancel</a>
  </div>
</div>

<!-- Bootstrap Toast -->
<div class="toast-container position-fixed top-0 end-0 p-3" *ngIf="showToast">
  <div class="toast align-items-center border-0 show"
       [ngClass]="{
         'text-bg-success': toastType === 'success',
         'text-bg-danger': toastType === 'error',
         'text-bg-info': toastType === 'info'
       }">
    <div class="d-flex">
      <div class="toast-body">{{ toastMessage }}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto"
              (click)="showToast = false"></button>
    </div>
  </div>
</div>