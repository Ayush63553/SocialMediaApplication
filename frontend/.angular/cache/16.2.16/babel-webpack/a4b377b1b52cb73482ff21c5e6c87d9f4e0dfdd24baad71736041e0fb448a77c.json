{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nconst BASE = 'http://localhost:8765';\nexport let FeedComponent = class FeedComponent {\n  constructor(http, userService, cdRef, router, friendsService) {\n    this.http = http;\n    this.userService = userService;\n    this.cdRef = cdRef;\n    this.router = router;\n    this.friendsService = friendsService;\n    this.posts = [];\n    this.friends = [];\n    this.suggestions = [];\n    this.commentsMap = {};\n    this.showCommentsMap = {};\n    this.newCommentText = {};\n    this.isNewUser = false;\n    // âœ… Toast state\n    this.toastMessage = '';\n    this.toastType = 'info';\n    this.showToast = false;\n    this.expanded = {};\n    this.mutualFriendsMap = {};\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.userService.getUser(localStorage.getItem('userId')).subscribe({\n      next: user => {\n        this.loggedInUserId = user.userId;\n        this.loggedInUsername = user.username;\n        this.loadFeed();\n        this.loadFriends();\n        this.loadSuggestions();\n      },\n      error: err => console.error('Failed to load logged-in user', err)\n    });\n  }\n  showToaster(message, type = 'info') {\n    this.toastMessage = message;\n    this.toastType = type;\n    this.showToast = true;\n    this.cdRef.detectChanges();\n    setTimeout(() => {\n      this.showToast = false;\n      this.cdRef.detectChanges();\n    }, 3000);\n  }\n  // Load posts (friends + own posts)\n  loadFeed() {\n    this.http.get(`${BASE}/api/posts/feed/${this.loggedInUserId}`).subscribe(data => {\n      this.posts = data.map(p => ({\n        ...p,\n        likedByUsers: p.likedByUsers || [],\n        comments: p.comments || []\n      }));\n      this.posts.forEach(p => {\n        this.showCommentsMap[p.postId] = false;\n        this.commentsMap[p.postId] = p.comments || [];\n      });\n      // Check if new user (no friends and no posts)\n      this.isNewUser = this.posts.length === 0 && this.friends.length === 0;\n    }, err => console.error('Failed to load posts', err));\n  }\n  // Load friends\n  loadFriends() {\n    this.userService.getFriends(this.loggedInUserId).subscribe({\n      next: friends => {\n        this.friends = friends;\n        this.isNewUser = this.posts.length === 0 && this.friends.length === 0;\n        for (let i of this.friends) {\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Failed to load friends', err)\n    });\n  }\n  viewProfile(friend) {\n    this.showToaster(`ðŸ‘¤ Viewing profile of ${friend.username}`, 'info');\n    this.router.navigate(['friends/profile', friend.userId]);\n  }\n  // Load friend suggestions\n  loadSuggestions() {\n    this.userService.getFriendSuggestions(this.loggedInUserId).subscribe({\n      next: users => {\n        this.suggestions = users;\n        for (let i of this.suggestions) {\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Failed to load suggestions', err)\n    });\n  }\n  // Send friend request\n  sendFriendRequest(receiverId) {\n    this.userService.sendFriendRequest(this.loggedInUserId, receiverId).subscribe({\n      next: () => {\n        this.suggestions = this.suggestions.filter(u => u.userId !== receiverId);\n        this.showToaster('âœ… Friend request sent!', 'success');\n      },\n      error: err => {\n        console.error('Failed to send friend request', err);\n        this.showToaster('âŒ Failed to send friend request', 'error');\n      }\n    });\n  }\n  // Toggle like/unlike\n  toggleLike(post) {\n    const payload = {\n      postId: post.postId,\n      userId: this.loggedInUserId\n    };\n    if (post.likedByUsers.includes(this.loggedInUsername)) {\n      this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`).subscribe(() => {\n        post.likeCount = Math.max(0, post.likeCount - 1);\n        post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\n      }, err => console.error('Failed to unlike', err));\n    } else {\n      this.http.post(`${BASE}/api/likes`, payload).subscribe({\n        next: res => {\n          post.likeCount = res?.likeCount ?? post.likeCount + 1;\n          if (!post.likedByUsers.includes(this.loggedInUsername)) {\n            post.likedByUsers.push(this.loggedInUsername);\n          }\n        },\n        error: err => console.error('Failed to like', err)\n      });\n    }\n  }\n  // Dislike = unlike\n  dislikePost(post) {\n    this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`, {\n      responseType: 'text'\n    }).subscribe(() => {\n      if (post.likedByUsers.includes(this.loggedInUsername)) {\n        post.likeCount = Math.max(0, post.likeCount - 1);\n        post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\n      }\n    }, err => console.error('Dislike failed', err));\n  }\n  // Toggle comments\n  toggleComments(post) {\n    this.showCommentsMap[post.postId] = !this.showCommentsMap[post.postId];\n    if (this.showCommentsMap[post.postId]) {\n      this.loadComments(post.postId);\n    }\n  }\n  // Load comments\n  loadComments(postId) {\n    this.http.get(`${BASE}/api/comments/post/${postId}`).subscribe(data => {\n      this.commentsMap[postId] = data.map(c => ({\n        ...c,\n        username: c.username || `User ${c.userId}`\n      }));\n    }, err => console.error('Failed to load comments', err));\n  }\n  // Add comment\n  addComment(post) {\n    const text = (this.newCommentText[post.postId] || '').trim();\n    if (!text) return;\n    const payload = {\n      postId: post.postId,\n      userId: this.loggedInUserId,\n      content: text\n    };\n    this.http.post(`${BASE}/api/comments`, payload).subscribe(created => {\n      created.username = this.loggedInUsername;\n      this.commentsMap[post.postId] = this.commentsMap[post.postId] || [];\n      this.commentsMap[post.postId].push(created);\n      this.newCommentText[post.postId] = '';\n    }, err => console.error('Failed to add comment', err));\n  }\n  // Delete comment\n  deleteComment(post, comment) {\n    this.http.delete(`${BASE}/api/comments/${comment.commentId}?userId=${this.loggedInUserId}`).subscribe(() => {\n      this.commentsMap[post.postId] = this.commentsMap[post.postId].filter(c => c.commentId !== comment.commentId);\n      this.showToaster('ðŸ—‘ï¸ Comment deleted', 'info');\n    }, err => console.error('Failed to delete comment', err));\n  }\n  canDeleteComment(post, comment) {\n    return comment.userId === this.loggedInUserId || post.userId === this.loggedInUserId;\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n  }\n};\nFeedComponent = __decorate([Component({\n  selector: 'app-feed',\n  templateUrl: './feed.component.html',\n  styleUrls: ['./feed.component.css']\n})], FeedComponent);","map":{"version":3,"names":["Component","BASE","FeedComponent","constructor","http","userService","cdRef","router","friendsService","posts","friends","suggestions","commentsMap","showCommentsMap","newCommentText","isNewUser","toastMessage","toastType","showToast","expanded","mutualFriendsMap","ObjectKeys","Object","keys","ngOnInit","getUser","localStorage","getItem","subscribe","next","user","loggedInUserId","userId","loggedInUsername","username","loadFeed","loadFriends","loadSuggestions","error","err","console","showToaster","message","type","detectChanges","setTimeout","get","data","map","p","likedByUsers","comments","forEach","postId","length","getFriends","i","findMutualFriend","viewProfile","friend","navigate","getFriendSuggestions","users","sendFriendRequest","receiverId","filter","u","toggleLike","post","payload","includes","delete","likeCount","Math","max","res","push","dislikePost","responseType","toggleComments","loadComments","c","addComment","text","trim","content","created","deleteComment","comment","commentId","canDeleteComment","toggleDropdown","friendId","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\home\\feed\\feed.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { User, UserService } from '../../profile/user.service';\r\nimport { FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\r\nimport { Router } from '@angular/router';\r\n\r\nconst BASE = 'http://localhost:8765';\r\n\r\ninterface Post {\r\n  postId: number;\r\n  userId: number;\r\n  username: string;\r\n  content: string;\r\n  privacy?: string;\r\n  mediaUrl?: string;\r\n  mediaType?: string;\r\n  profilePictureUrl?: string;\r\n  likeCount: number;\r\n  likedByUsers: string[];\r\n  createdAt?: string;\r\n  comments: Comment[];\r\n}\r\n\r\ninterface Comment {\r\n  commentId: number;\r\n  postId: number;\r\n  userId: number;\r\n  username: string;\r\n  content: string;\r\n  createdAt?: string;\r\n  profilePictureUrl?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-feed',\r\n  templateUrl: './feed.component.html',\r\n  styleUrls: ['./feed.component.css']\r\n})\r\nexport class FeedComponent implements OnInit {\r\n  posts: Post[] = [];\r\n  friends: User[] = [];\r\n  suggestions: User[] = [];\r\n  commentsMap: { [postId: number]: Comment[] } = {};\r\n  showCommentsMap: { [postId: number]: boolean } = {};\r\n  newCommentText: { [postId: number]: string } = {};\r\n\r\n  loggedInUserId!: number;\r\n  loggedInUsername!: string;\r\n  isNewUser: boolean = false;\r\n\r\n  // âœ… Toast state\r\n  toastMessage: string = '';\r\n  toastType: 'success' | 'error' | 'info' = 'info';\r\n  showToast: boolean = false;\r\n\r\n  constructor(private http: HttpClient, private userService: UserService, \r\n    private cdRef: ChangeDetectorRef, private router:Router, private friendsService:FriendsService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userService.getUser(localStorage.getItem('userId')).subscribe({\r\n      next: (user: User) => {\r\n        this.loggedInUserId = user.userId;\r\n        this.loggedInUsername = user.username;\r\n        this.loadFeed();\r\n        this.loadFriends();\r\n        this.loadSuggestions();\r\n      },\r\n      error: (err) => console.error('Failed to load logged-in user', err)\r\n    });\r\n  }\r\n\r\n  private showToaster(message: string, type: 'success' | 'error' | 'info' = 'info') {\r\n    this.toastMessage = message;\r\n    this.toastType = type;\r\n    this.showToast = true;\r\n    this.cdRef.detectChanges();\r\n    setTimeout(() => {\r\n      this.showToast = false;\r\n      this.cdRef.detectChanges();\r\n    }, 3000);\r\n  }\r\n\r\n  // Load posts (friends + own posts)\r\n  loadFeed() {\r\n    this.http.get<Post[]>(`${BASE}/api/posts/feed/${this.loggedInUserId}`).subscribe(data => {\r\n      this.posts = data.map(p => ({\r\n        ...p,\r\n        likedByUsers: p.likedByUsers || [],\r\n        comments: p.comments || []\r\n      }));\r\n      \r\n      this.posts.forEach(p => {\r\n        this.showCommentsMap[p.postId] = false;\r\n        this.commentsMap[p.postId] = p.comments || [];\r\n      });\r\n\r\n      // Check if new user (no friends and no posts)\r\n      this.isNewUser = (this.posts.length === 0 && this.friends.length === 0);\r\n    }, err => console.error('Failed to load posts', err));\r\n  }\r\n\r\n  // Load friends\r\n  loadFriends() {\r\n    this.userService.getFriends(this.loggedInUserId).subscribe({\r\n      next: (friends) => {\r\n        this.friends = friends;\r\n        this.isNewUser = (this.posts.length === 0 && this.friends.length === 0);\r\n         for (let i of this.friends) {\r\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\r\n            next: (data) => {\r\n              this.mutualFriendsMap[i.userId] = data;\r\n            },\r\n            error: (err) => console.error('Error loading mutual friends', err)\r\n          });    \r\n        }\r\n      },\r\n      error: (err) => console.error('Failed to load friends', err)\r\n    });\r\n  }\r\n\r\n  viewProfile(friend: User): void {\r\n      this.showToaster(`ðŸ‘¤ Viewing profile of ${friend.username}`, 'info');\r\n      this.router.navigate(['friends/profile', friend.userId]);\r\n  }\r\n\r\n  // Load friend suggestions\r\n  loadSuggestions() {\r\n    this.userService.getFriendSuggestions(this.loggedInUserId).subscribe({\r\n      next: (users) => { \r\n        this.suggestions = users; \r\n        for (let i of this.suggestions) {\r\n          this.userService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\r\n            next: (data) => {\r\n              this.mutualFriendsMap[i.userId] = data;\r\n            },\r\n            error: (err) => console.error('Error loading mutual friends', err)\r\n          });    \r\n        }\r\n      },\r\n      error: (err) => console.error('Failed to load suggestions', err)\r\n    });\r\n  }\r\n\r\n  // Send friend request\r\n  sendFriendRequest(receiverId: number) {\r\n    this.userService.sendFriendRequest(this.loggedInUserId, receiverId).subscribe({\r\n      next: () => {\r\n        this.suggestions = this.suggestions.filter(u => u.userId !== receiverId);\r\n        this.showToaster('âœ… Friend request sent!', 'success');\r\n      },\r\n      error: (err) => {\r\n        console.error('Failed to send friend request', err);\r\n        this.showToaster('âŒ Failed to send friend request', 'error');\r\n      }\r\n    });\r\n  }\r\n\r\n  // Toggle like/unlike\r\n  toggleLike(post: Post) {\r\n    const payload = { postId: post.postId, userId: this.loggedInUserId };\r\n\r\n    if (post.likedByUsers.includes(this.loggedInUsername)) {\r\n      this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`)\r\n        .subscribe(() => {\r\n          post.likeCount = Math.max(0, post.likeCount - 1);\r\n          post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\r\n        }, err => console.error('Failed to unlike', err));\r\n    } else {\r\n      this.http.post<any>(`${BASE}/api/likes`, payload).subscribe({\r\n        next: (res) => {\r\n          post.likeCount = res?.likeCount ?? (post.likeCount + 1);\r\n          if (!post.likedByUsers.includes(this.loggedInUsername)) {\r\n            post.likedByUsers.push(this.loggedInUsername);\r\n          }\r\n        },\r\n        error: (err) => console.error('Failed to like', err)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Dislike = unlike\r\n  dislikePost(post: Post) {\r\n    this.http.delete(`${BASE}/api/likes/${post.postId}/user/${this.loggedInUserId}`, { responseType: 'text' })\r\n      .subscribe(() => {\r\n        if (post.likedByUsers.includes(this.loggedInUsername)) {\r\n          post.likeCount = Math.max(0, post.likeCount - 1);\r\n          post.likedByUsers = post.likedByUsers.filter(u => u !== this.loggedInUsername);\r\n        }\r\n      }, err => console.error('Dislike failed', err));\r\n  }\r\n\r\n  // Toggle comments\r\n  toggleComments(post: Post) {\r\n    this.showCommentsMap[post.postId] = !this.showCommentsMap[post.postId];\r\n    if (this.showCommentsMap[post.postId]) {\r\n      this.loadComments(post.postId);\r\n    }\r\n  }\r\n\r\n  // Load comments\r\n  loadComments(postId: number) {\r\n    this.http.get<Comment[]>(`${BASE}/api/comments/post/${postId}`)\r\n      .subscribe(data => {\r\n        this.commentsMap[postId] = data.map(c => ({\r\n          ...c,\r\n          username: c.username || `User ${c.userId}`\r\n        }));\r\n      }, err => console.error('Failed to load comments', err));\r\n  }\r\n\r\n  // Add comment\r\n  addComment(post: Post) {\r\n    const text = (this.newCommentText[post.postId] || '').trim();\r\n    if (!text) return;\r\n\r\n    const payload = { postId: post.postId, userId: this.loggedInUserId, content: text };\r\n    this.http.post<Comment>(`${BASE}/api/comments`, payload)\r\n      .subscribe(created => {\r\n        created.username = this.loggedInUsername;\r\n        this.commentsMap[post.postId] = this.commentsMap[post.postId] || [];\r\n        this.commentsMap[post.postId].push(created);\r\n        this.newCommentText[post.postId] = '';\r\n      }, err => console.error('Failed to add comment', err));\r\n  }\r\n\r\n  // Delete comment\r\n  deleteComment(post: Post, comment: Comment) {\r\n    this.http.delete(`${BASE}/api/comments/${comment.commentId}?userId=${this.loggedInUserId}`)\r\n      .subscribe(() => {\r\n        this.commentsMap[post.postId] =\r\n          this.commentsMap[post.postId].filter(c => c.commentId !== comment.commentId);\r\n        this.showToaster('ðŸ—‘ï¸ Comment deleted', 'info');\r\n      }, err => console.error('Failed to delete comment', err));\r\n  }\r\n\r\n  canDeleteComment(post: Post, comment: Comment) {\r\n    return comment.userId === this.loggedInUserId || post.userId === this.loggedInUserId;\r\n  }\r\n\r\n  \r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n  mutualFriendsMap: { [userId: number]: User[] } = {};\r\n  ObjectKeys = Object.keys;\r\n  toggleDropdown(friendId: number): void {\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}