{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ViewPersonProfileComponent = class ViewPersonProfileComponent {\n  constructor(route, friendsService, profileService, router) {\n    this.route = route;\n    this.friendsService = friendsService;\n    this.profileService = profileService;\n    this.router = router;\n    this.profile = {\n      userId: 0,\n      username: '',\n      bio: '',\n      profilePictureUrl: '',\n      email: '',\n      firstName: '',\n      lastName: '',\n      dateOfBirth: new Date(),\n      gender: '',\n      relationshipStatus: ''\n    };\n    this.loading = true;\n    this.mutualFriends = [];\n    this.toggleFriends = false;\n    this.check = true;\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(params => {\n      this.userId = params.get('userId');\n      this.fetchProfile();\n    });\n  }\n  checkStatus() {\n    this.friendsService.getStatus(localStorage.getItem('userId'), this.profile.userId).subscribe({\n      next: data => this.profile.relationshipStatus = data,\n      error: err => console.log('error occured:', err)\n    });\n  }\n  fetchProfile() {\n    this.friendsService.getProfile(this.userId).subscribe({\n      next: data => {\n        this.profile = data;\n        this.loading = false;\n        this.checkStatus();\n        this.fetchMutualFriends();\n      },\n      error: err => {\n        console.error('Error fetching profile', err);\n        this.loading = false;\n      }\n    });\n  }\n  toggle() {\n    this.toggleFriends = !this.toggleFriends;\n    if (this.check) this.fetchMutualFriends();\n  }\n  fetchMutualFriends() {\n    this.check = false;\n    this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), this.profile.userId).subscribe({\n      next: data => {\n        this.mutualFriends = data;\n      },\n      error: err => console.error('Error loading mutual friends', err)\n    });\n  }\n  addFriend() {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'), this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'REQUEST_SENT';\n    });\n  }\n  unfriend() {\n    this.friendsService.unFriend(localStorage.getItem('userId'), this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n  }\n  acceptRequest() {\n    this.friendsService.acceptFriendRequest(this.profile.userId, localStorage.getItem('userId')).subscribe(() => {\n      this.profile.relationshipStatus = 'FRIEND';\n    });\n  }\n  rejectRequest() {\n    this.friendsService.rejectFriendRequest(this.profile.userId, localStorage.getItem('userId')).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n  }\n  cancelRequest() {\n    this.friendsService.cancelFriendRequest(localStorage.getItem('userId'), this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n  }\n  goToMutualFriendProfile(userId) {\n    this.check = true;\n    this.toggleFriends = false;\n    this.router.navigate(['friends/profile', userId]);\n  }\n  loadUser() {\n    this.profileService.getUser(this.currentUserId).subscribe({\n      next: u => {\n        this.user = {\n          name: `${u.firstName || ''} ${u.lastName || ''}`.trim() || u.username,\n          avatar: u.profilePictureUrl || 'https://tse3.mm.bing.net/th/id/OIP.F977i9e7dMrznvOT8q8azgHaEf?rs=1&pid=ImgDetMain&o=7&rm=3',\n          location: u.location || '',\n          profession: u.profession || '',\n          education: u.education || '',\n          bio: u.bio || '',\n          friends: u.friends || 0,\n          photos: u.photos || 0,\n          comments: u.comments || 0\n        };\n      },\n      error: err => console.error('Failed to load user', err)\n    });\n  }\n};\nViewPersonProfileComponent = __decorate([Component({\n  selector: 'app-view-person-profile',\n  templateUrl: './view-person-profile.component.html',\n  styleUrls: ['./view-person-profile.component.css']\n})], ViewPersonProfileComponent);","map":{"version":3,"names":["Component","ViewPersonProfileComponent","constructor","route","friendsService","profileService","router","profile","userId","username","bio","profilePictureUrl","email","firstName","lastName","dateOfBirth","Date","gender","relationshipStatus","loading","mutualFriends","toggleFriends","check","ngOnInit","paramMap","subscribe","params","get","fetchProfile","checkStatus","getStatus","localStorage","getItem","next","data","error","err","console","log","getProfile","fetchMutualFriends","toggle","findMutualFriend","addFriend","sendFriendRequest","unfriend","unFriend","acceptRequest","acceptFriendRequest","rejectRequest","rejectFriendRequest","cancelRequest","cancelFriendRequest","goToMutualFriendProfile","navigate","loadUser","getUser","currentUserId","u","user","name","trim","avatar","location","profession","education","friends","photos","comments","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\view-person-profile\\view-person-profile.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Friend, FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\n\n@Component({\n  selector: 'app-view-person-profile',\n  templateUrl: './view-person-profile.component.html',\n  styleUrls: ['./view-person-profile.component.css']\n})\n\nexport class ViewPersonProfileComponent implements OnInit{\n\n\n  userId!: string;\n\n  profile: UserDTO={\n    userId:0,\n    username:'',\n    bio:'',\n    profilePictureUrl:'',\n    email:'',\n    firstName:'',\n    lastName:'',\n    dateOfBirth:new Date(),\n    gender:'',\n    relationshipStatus:''\n  };\n\n  loading = true;\n\n  constructor(private route: ActivatedRoute, private friendsService: FriendsService,\n    private profileService:Prof\n    private router:Router) {}\n\n  ngOnInit(): void {\n\n    this.route.paramMap.subscribe(params => {\n\n      this.userId = params.get('userId')!;\n\n      this.fetchProfile();\n\n    });\n\n  }\n\n  checkStatus():void{\n    this.friendsService.getStatus(localStorage.getItem('userId'),this.profile.userId).subscribe({\n      next: data=>this.profile.relationshipStatus=data,\n      error:err=>console.log('error occured:',err)\n    })\n  }\n\n  fetchProfile(): void {\n\n    this.friendsService.getProfile(this.userId).subscribe({\n\n      next: (data) => {\n        this.profile = data;\n        this.loading = false;\n        this.checkStatus();\n        this.fetchMutualFriends();\n      },\n      error: (err) => {\n        console.error('Error fetching profile', err);\n        this.loading = false;\n      }\n    });\n\n  }\n  mutualFriends:UserDTO[]=[];\n  toggleFriends:boolean=false;\n\n  toggle(){\n    this.toggleFriends=!this.toggleFriends;\n    if(this.check) this.fetchMutualFriends();\n  }\n  check:boolean=true;\n  fetchMutualFriends(){\n    this.check=false;    \n    this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),this.profile.userId).subscribe({\n          next: (data) => {\n            this.mutualFriends =data;\n          },\n          error: (err) => console.error('Error loading mutual friends', err)\n          });\n  }\n\n  addFriend(): void {\n    this.friendsService.sendFriendRequest(localStorage.getItem('userId'),this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'REQUEST_SENT';\n    });\n  }\n\n  unfriend(): void {\n    this.friendsService.unFriend(localStorage.getItem('userId'),this.profile.userId).subscribe(() => {\n      this.profile.relationshipStatus = 'NOT_FRIEND';\n    });\n  }\n\n  acceptRequest(): void {\n    this.friendsService.acceptFriendRequest(this.profile.userId,localStorage.getItem('userId')).subscribe(() => {\n      this.profile.relationshipStatus = 'FRIEND';\n    });\n  }\n\n  rejectRequest():void{\n    this.friendsService.rejectFriendRequest(this.profile.userId,localStorage.getItem('userId')).subscribe(()=>{\n      this.profile.relationshipStatus='NOT_FRIEND'; \n    })\n  }\n\n  cancelRequest():void{\n    this.friendsService.cancelFriendRequest(localStorage.getItem('userId'),this.profile.userId).subscribe(()=>{\n      this.profile.relationshipStatus='NOT_FRIEND'; \n    })\n  }\n\n  \n  goToMutualFriendProfile(userId:any){\n    this.check=true;\n    this.toggleFriends=false;\n    this.router.navigate(['friends/profile',userId]);   \n  }\n\n\n  loadUser(): void {\n    this.profileService.getUser(this.currentUserId).subscribe({\n      next: (u) => {\n        this.user = {\n          name: `${u.firstName || ''} ${u.lastName || ''}`.trim() || u.username,\n          avatar: u.profilePictureUrl || 'https://tse3.mm.bing.net/th/id/OIP.F977i9e7dMrznvOT8q8azgHaEf?rs=1&pid=ImgDetMain&o=7&rm=3',\n          location: u.location || '',       \n          profession: u.profession || '',\n          education: u.education || '',\n          bio: u.bio || '',\n          friends: u.friends || 0,\n          photos: u.photos || 0,\n          comments: u.comments || 0\n        };\n      },\n      error: (err) => console.error('Failed to load user', err)\n    });\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}