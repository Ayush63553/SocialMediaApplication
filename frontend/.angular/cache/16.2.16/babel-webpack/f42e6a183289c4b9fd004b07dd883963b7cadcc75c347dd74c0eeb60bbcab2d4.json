{"ast":null,"code":"import { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class AuthService {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.apiUrl = 'http://localhost:8765/api/auth';\n    this.tokenKey = 'mysecretkeymysecretkeymysecretkey12345';\n  }\n  // ðŸ”¹ Login user\n  login(payload) {\n    return this.http.post(`${this.apiUrl}/login`, payload).pipe(tap(response => {\n      if (response.token) {\n        localStorage.setItem(this.tokenKey, response.token);\n      }\n    }));\n  }\n  // ðŸ”¹ Logout user\n  logout() {\n    localStorage.removeItem(this.tokenKey);\n    this.router.navigate(['/login']);\n  }\n  // ðŸ”¹ Get token\n  getToken() {\n    return localStorage.getItem(this.tokenKey);\n  }\n  // ðŸ”¹ Check if logged in\n  isLoggedIn() {\n    const token = this.getToken();\n    if (!token) return false;\n    // Decode token to check expiry\n    const payload = JSON.parse(atob(token.split('.')[1]));\n    const expiry = payload.exp * 1000; // seconds â†’ ms\n    return Date.now() < expiry;\n  }\n  static {\n    this.Éµfac = function AuthService_Factory(t) {\n      return new (t || AuthService)(i0.ÉµÉµinject(i1.HttpClient), i0.ÉµÉµinject(i2.Router));\n    };\n  }\n  static {\n    this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n      token: AuthService,\n      factory: AuthService.Éµfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["tap","AuthService","constructor","http","router","apiUrl","tokenKey","login","payload","post","pipe","response","token","localStorage","setItem","logout","removeItem","navigate","getToken","getItem","isLoggedIn","JSON","parse","atob","split","expiry","exp","Date","now","i0","ÉµÉµinject","i1","HttpClient","i2","Router","factory","Éµfac","providedIn"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\core\\services\\Login\\authLogin.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\nimport { HttpClient } from '@angular/common/http';\n\nimport { Router } from '@angular/router';\n\nimport { Observable } from 'rxjs';\n\nimport { tap } from 'rxjs/operators';\n\nexport interface LoginPayload {\n\n  email: string;\n\n  password: string;\n\n}\n\n@Injectable({\n\n  providedIn: 'root'\n\n})\n\nexport class AuthService {\n\n  private apiUrl = 'http://localhost:8765/api/auth';\n\n  private tokenKey = 'mysecretkeymysecretkeymysecretkey12345';\n\n  constructor(private http: HttpClient, private router: Router) {}\n\n  // ðŸ”¹ Login user\n\n  login(payload: LoginPayload): Observable<any> {\n\n    return this.http.post<{ token: string }>(`${this.apiUrl}/login`, payload).pipe(\n\n      tap(response => {\n\n        if (response.token) {\n\n          localStorage.setItem(this.tokenKey, response.token);\n\n        }\n\n      })\n\n    );\n\n  }\n\n  // ðŸ”¹ Logout user\n\n  logout(): void {\n\n    localStorage.removeItem(this.tokenKey);\n\n    this.router.navigate(['/login']);\n\n  }\n\n  // ðŸ”¹ Get token\n\n  getToken(): string | null {\n\n    return localStorage.getItem(this.tokenKey);\n\n  }\n\n  // ðŸ”¹ Check if logged in\n\n  isLoggedIn(): boolean {\n\n    const token = this.getToken();\n\n    if (!token) return false;\n\n    // Decode token to check expiry\n\n    const payload = JSON.parse(atob(token.split('.')[1]));\n\n    const expiry = payload.exp * 1000; // seconds â†’ ms\n\n    return Date.now() < expiry;\n\n  }\n\n}"],"mappings":"AAQA,SAASA,GAAG,QAAQ,gBAAgB;;;;AAgBpC,OAAM,MAAOC,WAAW;EAMtBC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAJ5C,KAAAC,MAAM,GAAG,gCAAgC;IAEzC,KAAAC,QAAQ,GAAG,wCAAwC;EAEI;EAE/D;EAEAC,KAAKA,CAACC,OAAqB;IAEzB,OAAO,IAAI,CAACL,IAAI,CAACM,IAAI,CAAoB,GAAG,IAAI,CAACJ,MAAM,QAAQ,EAAEG,OAAO,CAAC,CAACE,IAAI,CAE5EV,GAAG,CAACW,QAAQ,IAAG;MAEb,IAAIA,QAAQ,CAACC,KAAK,EAAE;QAElBC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACR,QAAQ,EAAEK,QAAQ,CAACC,KAAK,CAAC;;IAIvD,CAAC,CAAC,CAEH;EAEH;EAEA;EAEAG,MAAMA,CAAA;IAEJF,YAAY,CAACG,UAAU,CAAC,IAAI,CAACV,QAAQ,CAAC;IAEtC,IAAI,CAACF,MAAM,CAACa,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAElC;EAEA;EAEAC,QAAQA,CAAA;IAEN,OAAOL,YAAY,CAACM,OAAO,CAAC,IAAI,CAACb,QAAQ,CAAC;EAE5C;EAEA;EAEAc,UAAUA,CAAA;IAER,MAAMR,KAAK,GAAG,IAAI,CAACM,QAAQ,EAAE;IAE7B,IAAI,CAACN,KAAK,EAAE,OAAO,KAAK;IAExB;IAEA,MAAMJ,OAAO,GAAGa,IAAI,CAACC,KAAK,CAACC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAErD,MAAMC,MAAM,GAAGjB,OAAO,CAACkB,GAAG,GAAG,IAAI,CAAC,CAAC;IAEnC,OAAOC,IAAI,CAACC,GAAG,EAAE,GAAGH,MAAM;EAE5B;;;uBA9DWxB,WAAW,EAAA4B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;aAAXjC,WAAW;MAAAkC,OAAA,EAAXlC,WAAW,CAAAmC,IAAA;MAAAC,UAAA,EAJV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}