{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FriendListComponent = class FriendListComponent {\n  constructor(friendsService, router) {\n    this.friendsService = friendsService;\n    this.router = router;\n    this.friends = [];\n    this.searchText = '';\n    this.filteredFriends = [];\n    this.expanded = {};\n    this.mutualFriendsMap = {}; // store loaded lists\n    this.ObjectKeys = Object.keys;\n  }\n  ngOnInit() {\n    this.loadRequests();\n  }\n  onSearchChange() {\n    const text = this.searchText.toLowerCase();\n    this.friends = this.filteredFriends.filter(friend => friend.username.toLowerCase().includes(text));\n  }\n  loadRequests() {\n    this.friendsService.getFriends(localStorage.getItem('userId')).subscribe({\n      next: data => {\n        this.friends = data;\n        this.filteredFriends = data;\n        for (let i of this.filteredFriends) {\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"), i.userId).subscribe({\n            next: data => {\n              this.mutualFriendsMap[i.userId] = data;\n            },\n            error: err => console.error('Error loading mutual friends', err)\n          });\n        }\n      },\n      error: err => console.error('Error loading received requests', err)\n    });\n  }\n  toggleDropdown(friendId) {\n    this.expanded[friendId] = !this.expanded[friendId];\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\n    //     error: (err) => console.error('Error loading mutual friends', err)\n    //   });\n    // }\n  }\n\n  viewProfile(friend) {\n    alert(`Viewing profile of ${friend.username}`);\n    this.router.navigate(['friends/profile', friend.userId]);\n  }\n  unfriend(friend) {\n    this.friendsService.unFriend(localStorage.getItem('userId'), friend.userId).subscribe({\n      next: data => {\n        alert(data);\n        this.loadRequests();\n      },\n      error: err => alert(\"Friend couldn't be deleted\")\n    });\n  }\n};\nFriendListComponent = __decorate([Component({\n  selector: 'app-friend-list',\n  templateUrl: './friend-list.component.html',\n  styleUrls: ['./friend-list.component.css']\n})], FriendListComponent);","map":{"version":3,"names":["Component","FriendListComponent","constructor","friendsService","router","friends","searchText","filteredFriends","expanded","mutualFriendsMap","ObjectKeys","Object","keys","ngOnInit","loadRequests","onSearchChange","text","toLowerCase","filter","friend","username","includes","getFriends","localStorage","getItem","subscribe","next","data","i","findMutualFriend","userId","error","err","console","toggleDropdown","friendId","viewProfile","alert","navigate","unfriend","unFriend","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\ayushman.jha01\\Saved Games\\Facebook_group3\\group3-frontend\\src\\app\\features\\friends\\friend-list\\friend-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { FriendsService, UserDTO } from 'src/app/core/services/Friends/friends.service';\r\n\r\n@Component({\r\n  selector: 'app-friend-list',\r\n  templateUrl: './friend-list.component.html',\r\n  styleUrls: ['./friend-list.component.css']\r\n})\r\nexport class FriendListComponent implements OnInit{\r\n  \r\n  friends:UserDTO[]=[];\r\n  searchText: string = '';\r\n  filteredFriends:UserDTO[]=[];\r\n\r\n  expanded: { [userId: number]: boolean } = {};\r\n\r\n  mutualFriendsMap: { [userId: number]: UserDTO[] } = {}; // store loaded lists\r\n\r\n  constructor(private friendsService:FriendsService, private router:Router){}\r\n  ngOnInit(): void {\r\n    this.loadRequests();\r\n  }\r\n\r\n  onSearchChange(): void {\r\n    const text = this.searchText.toLowerCase();\r\n    this.friends = this.filteredFriends.filter(friend =>\r\n      friend.username.toLowerCase().includes(text)\r\n    );\r\n\r\n  }\r\n\r\n  loadRequests(): void {\r\n    this.friendsService.getFriends(localStorage.getItem('userId')).subscribe({\r\n      next: data => {\r\n        this.friends=data;\r\n        this.filteredFriends=data;\r\n        for(let i of this.filteredFriends){\r\n          this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),i.userId).subscribe({\r\n          next: (data) => {\r\n            this.mutualFriendsMap[i.userId] =data;\r\n          },\r\n          error: (err) => console.error('Error loading mutual friends', err)\r\n          });    \r\n        }\r\n      },\r\n\r\n      error: err => console.error('Error loading received requests', err)\r\n\r\n    });\r\n\r\n  }\r\n\r\n  toggleDropdown(friendId: number): void {\r\n\r\n    this.expanded[friendId] = !this.expanded[friendId];\r\n\r\n    // if (this.expanded[friendId] && !this.mutualFriendsMap[friendId]) {\r\n\r\n    //   this.friendsService.findMutualFriend(localStorage.getItem(\"userId\"),friendId).subscribe({\r\n\r\n    //     next: (data) => (this.mutualFriendsMap[friendId] =data),\r\n\r\n    //     error: (err) => console.error('Error loading mutual friends', err)\r\n\r\n    //   });\r\n\r\n    // }\r\n\r\n  }\r\n  \r\n  ObjectKeys=Object.keys;\r\n\r\n  viewProfile(friend:UserDTO):void{\r\n    alert(`Viewing profile of ${friend.username}`)\r\n    this.router.navigate(['friends/profile',friend.userId])\r\n  }\r\n\r\n  unfriend(friend:UserDTO):void{\r\n    this.friendsService.unFriend(localStorage.getItem('userId'),friend.userId).subscribe({\r\n      next: data => {\r\n        alert(data);\r\n        this.loadRequests();\r\n      },\r\n      error: err=> alert(\"Friend couldn't be deleted\")\r\n\r\n    })\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}